!function(){define("utils/query_param",[],function(){"use strict";return function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}}),define("jqueryui/widget",["jquery"],function(a){return function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(a),a}),define("widgets/ad",["lodash","jquery","jqueryui/widget"],function(a,b){"use strict";b.widget("ted.ad",{_rendered:!1,$image:null,$text:null,$link:null,blocked:function(){this.element.hide()},refreshJsonAd:function(){if(this.options.blocked)return void this.blocked();if(this._rendered||(this._addAdClass(),this.element.children().addClass("ad__prefill"),this.options.ad.houseAd||this._getAppreciationText().appendTo(this.element),this.$link=b('<a class="ad__unit" href="#" rel="nofollow" target="_blank">').appendTo(this.element),this.$image=b("<img>").appendTo(this.$link),this._rendered=!0),!this.options.ad)return void this.element.hide();var a=this._getRenderDetails();this.$link.attr("href",a.click),this.$image.attr({src:a.currentCreative.url,width:a.dimensions.width,height:a.dimensions.height}),this.element[this.options.ad.hasDisplay===!1?"hide":"show"](),this._impress()},refreshHtmlAd:function(){this._addAdClass(),this._getAppreciationText().prependTo(this.element)},_init:function(){var a=String(this.options.mode);this._rendered=!1,"json"===a?this.refreshJsonAd():"html"===a&&this.refreshHtmlAd()},_fireImpression:function(a){var b=new Image;b.src=a},_impress:function(){this._fireImpression(this.options.ad.impression),a.forEach(this.options.ad.thirdPartyImpressions,this._fireImpression)},_getCreative:function(){var b=a.filter(this.options.ad.creative,function(a){return""!==a.url}),c=Math.max(window.devicePixelRatio||1,1);return a.reduce(b,function(a,b){return b.density<=c?b:a||b},{})},_getRenderDetails:function(){return a.extend({currentCreative:this._getCreative()},this.options.ad)},_getAppreciationText:function(){return this.$text=b('<div class="ad__text">TED Talks are free thanks to support from</div>'),this.$text},_addAdClass:function(){this.element.addClass("ad")}})}),define("hbs/underscore",{}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",{load:function(a){throw new Error("Dynamic load not allowed: "+a)}}),define("hbs!templates/sponsorshipBug",["hbs","hbs/handlebars"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<a class="sponsorship-bug__link media" href="#" rel="nofollow" target="_blank">\n  <div class="sponsorship-bug__image media__image media__image--alt">\n    <img src="" alt="">\n  </div>\n  <div class="sponsorship-bug__message media__message">\n    TED Talks are free<br>\n    thanks to support from\n  </div>\n</a>\n'},useData:!0});return b.registerPartial("templates/sponsorshipBug",c),c}),define("templates/helpers/assetUrl",["Handlebars"],function(a){"use strict";function b(a){return TED.assetHost+a}return a.registerHelper("assetUrl",b),b}),define("hbs!templates/sponsorshipBugBlocked",["hbs","hbs/handlebars","templates/helpers/assetUrl"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<a class="sponsorship-bug__nag" href="http://support.ted.com/customer/portal/articles/1532436-how-can-i-support-ted-by-modifying-my-ad-blocker-settings" target="_blank">\n  <img class="sponsorship-bug__nag__image" src="'+this.escapeExpression((b.assetUrl||a&&a.assetUrl||b.helperMissing).call(a,"/temp/ad-blocker-bug.png",{name:"assetUrl",hash:{},data:d}))+'" alt="Show your support by unblocking ted.com from ad blockers">\n</a>\n'},useData:!0});return b.registerPartial("templates/sponsorshipBugBlocked",c),c}),define("widgets/sponsorshipBug",["jquery","hbs!templates/sponsorshipBug","hbs!templates/sponsorshipBugBlocked","widgets/ad"],function(a,b,c){"use strict";a.widget("ted.sponsorshipBug",a.ted.ad,{blocked:function(){this.element.html(c()),this.element.show(),this._rendered=!1},refreshJsonAd:function(){return this.options.blocked?this.blocked():(this._rendered||(this.element.children().addClass("sponsorship-bug__prefill"),this.element.append(b()),this.$image=this.element.find("img"),this.$link=this.element.find("a.sponsorship-bug__link"),this._rendered=!0),void this._super())},_init:function(){this.element.addClass("sponsorship-bug"),this._super()}})}),define("lib/ads",["jquery","lodash","utils/query_param","exports","widgets/ad","widgets/sponsorshipBug"],function(a,b,c,d){"use strict";function e(a){var b=new Image;b.src=a}function f(b){var c=String(b.type),d=l[b.type];"master"===c?m.deferred.resolve(b):void 0===d?window.console&&console.log&&(console.log("Unknown ad type"),console.log(b)):a(d.id)[d.widget]({ad:b,mode:"json"})}function g(c){b.forEach(m.companionAdSlots,function(b){if(b.gptSlot.setTargeting(b.key,c.target),b.displayed){var e=a("#"+b.containerId);e.data("tedAd")?e.ad("destroy"):e.data("sponsorshipBug")&&e.sponsorshipBug("destroy"),d.refreshAd(b.gptSlot)}else d.displayAd(b.containerId);b.displayed=!0}),e(c.impression)}function h(a){return a.replace("{adUnit}",m.slot.adUnit)}function i(a){d.player.player("sendAds",{postroll:h(a.postrollURL),preroll:h(a.prerollURL)})}function j(b){var c=d.player=b;if(c){var e=d.playerMode=String(c.player("mode"));if("hls"===e)c.on({playerad:function(a,b){f(b.ad)}});else{m.deferred.done(g),c.on({playeradblock:function(){var b=l.bug;a(b.id)[b.widget]({blocked:!0})}});var h=!0;c.on({playertalk:function(a,b){var f=String(c.player("talks")[0].id),g=String(b.id);h&&f===g?(h=!1,"flash"===e&&m.deferred.done(i)):d.refreshMasterAd({targeting:b.targeting}),h=!1}})}}}function k(){b.forEach(m.slot.targeting,function(a,c){m.slot.gptSlot.setTargeting(c,b.isArray(a)?a.join(","):a)});var a=c("dfptest");a&&m.slot.gptSlot.setTargeting("dfptest",a)}var l={bug:{id:"#sponsorship-bug-placeholder",widget:"sponsorshipBug"},companion:{id:"#ad-unit",widget:"ad"},"companion-mobile":{id:"#ad-unit-mobile",widget:"ad"},devil:{id:"#devil-ad",widget:"ad"},onPage:{id:"#ad-unit",widget:"ad"}},m={companionAdSlots:[],deferred:a.Deferred(),slot:{adUnit:null,containerId:null,gptSlot:null,targeting:{}}};d._masterAd=m,d.player=null,window.googletag=window.googletag||{cmd:[]},d.slotRenderEndedHandler=function(c){var d=b.find(m.companionAdSlots,function(a){return a.gptSlot===c.slot});if(!c.isEmpty&&d){var e=String(d.containerId);if("ad-unit"===e){var f=a("#ad-unit"),g=f.data("tedAd");g||f.ad({mode:"html"})}}},d.displayMasterAd=function(a){m.slot.containerId=a.containerId,m.slot.adUnit=a.adUnit,window.googletag.cmd.push(function(){m.slot.gptSlot=googletag.defineOutOfPageSlot(m.slot.adUnit,m.slot.containerId).addService(googletag.pubads()),b.assign(m.slot.targeting,a.targeting),k(),d.displayAd(m.slot.containerId)})},d.refreshMasterAd=function(c){"hls"!==d.playerMode&&(m.deferred=a.Deferred(),m.deferred.done(g),"flash"===d.playerMode&&m.deferred.done(i),m.slot.gptSlot.clearTargeting(),b.forEach(m.companionAdSlots,function(a){a.gptSlot.clearTargeting()}),b.assign(m.slot.targeting,c.targeting),k(),d.refreshAd(m.slot.gptSlot))},d.displayAd=function(b){a(function(){window.googletag.cmd.push(function(){googletag.display(b)})})},d.refreshAd=function(a){window.googletag.cmd.push(function(){googletag.pubads().refresh([a])})},d.createCompanionSlot=function(a){window.googletag.cmd.push(function(){var b=googletag.defineSlot(a.adUnit,a.size,a.containerId).addService(googletag.pubads());m.companionAdSlots.push({containerId:a.containerId,gptSlot:b,key:a.key})})},d.initPlayer=j,d.gptAd=function(a){f(a.ad)},window.googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",d.slotRenderEndedHandler)})}),define("hbs!apps/embeddable/templates/error",["hbs","hbs/handlebars"],function(a,b){var c=b.template({1:function(a,b,c,d){return"        Sorry:\n        we can't play video on this browser.\n        Please make sure it's up to date\n        and that Flash 11.1 or higher is installed.\n"},3:function(a,b,c,d){return"        We're sorry:\n        video playback cannot be initialized\n        on your browser at this time.\n"},5:function(a,b,c,d){return"        We're sorry:\n        video playback has been interrupted.\n        You may need to refresh the page\n        to resume.\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'\n<div class="Embeddable__error vc inverse">\n  <div class="vc__wrap">\n    <div class="Embeddable__error__message">\n'+(null!=(e=b["if"].call(a,null!=a?a.isClient:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.isInit:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.isFatal:a,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.noop,data:d}))?e:"")+'\n      <a href="'+this.escapeExpression((f=null!=(f=b.url||(null!=a?a.url:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"url",hash:{},data:d}):f))+'" target="_blank">Load this talk on ted.com</a>\n    </div>\n  </div>\n</div>\n'},useData:!0});return b.registerPartial("apps/embeddable/templates/error",c),c}),define("apps/embeddable/models/talk",["lodash","Backbone"],function(a,b){"use strict";var c=b.Model.extend({toPlayer:function(){var b=this.toJSON();return{id:b.id,resources:{hls:{stream:b.resources.hls.stream,adUrl:b.resources.hls.adUrl},h264:[{file:b.resources.h264[0].file}]},duration:b.duration,introDuration:b.introDuration,adDuration:b.adDuration,postAdDuration:b.postAdDuration,nativeLanguage:b.nativeLanguage,languages:a.map(b.languages,function(a){return{langaugeName:a.languageName,languageCode:a.languageCode,isRtl:a.isRtl}})}}});return c}),define("apps/embeddable/collections/talks",["lodash","Backbone","apps/embeddable/models/talk"],function(a,b,c){"use strict";var d=b.Collection.extend({model:c,before:function(a){return this.at(this.indexOf(a)-1)},after:function(a){return this.at(this.indexOf(a)+1)},toPlayer:function(){return this.map(function(a){return a.toPlayer()})}});return d}),define("views/mixins/cached-find",["exports"],function(a){"use strict";a._findEls=null,a.find=function(a){if(this._findEls||(this._findEls={}),this._findEls[a])return this._findEls[a];var b=this.$el.find(a);return b.length&&(this._findEls[a]=b),b}}),define("apps/embeddable/views/base",["lodash","Backbone","views/mixins/cached-find"],function(a,b,c){"use strict";var d=b.View.extend({propsDefaults:null,stateDefaults:null,propsEvents:null,stateEvents:null,adoptView:function(b){a.extend(this.propsDefaults,b.prototype.propsDefaults),a.extend(this.stateDefaults,b.prototype.stateDefaults),a.extend(this.propsEvents,b.prototype.propsEvents),a.extend(this.stateEvents,b.prototype.stateEvents)},initialize:function(){this.initializeState(),this.initializeProps()},initializeProps:function(){this.props=this._eventModel(this.propsDefaults,this.propsEvents)},initializeState:function(){this.state=this._eventModel(this.stateDefaults,this.stateEvents)},toggleClass:function(a,b,c){this.find(a)[c?"addClass":"removeClass"](b)},_eventModel:function(c,d){if(!c)return!1;var e=new b.Model(c),f=this;return a.forOwn(d,function(b,c){a.isString(b)&&(b=f[b]);var d=c.split(":");"on"===d[0]&&(c="change:"+d[1],b=a.wrap(b,function(a,b,c){c&&a.call(f)})),f.listenTo(e,c,b)}),e}});return a.extend(d.prototype,c),d}),define("apps/embeddable/utils/toggle-class",[],function(){"use strict";return function(a,b){return function(c,d){this.toggleClass(a,b,d)}}}),define("apps/embeddable/utils/untoggle-class",[],function(){"use strict";return function(a,b){return function(c,d){this.toggleClass(a,b,!d)}}}),define("utils/formatDuration",[],function(){"use strict";function a(a){return(a>9?"":"0")+a}return function(b){var c=b%60|0,d=b/3600|0,e=b%3600/60|0;return(d?d+":"+a(e):e)+":"+a(c)}}),define("templates/helpers/icon",["Handlebars"],function(a){"use strict";function b(a,b,d){return a=c(a),b=c(b),d=c(d),'<i class="icon icon_'+a+" "+(d||"")+'">'+(b?"<span class=screen-reader-text>"+b+"</span>":"")+"</i>"}var c=a.Utils.escapeExpression;return a.registerHelper("icon",function(c,d,e){return new a.SafeString(b(c,d,e))}),b}),define("hbs!apps/embeddable/templates/controls",["hbs","hbs/handlebars","templates/helpers/icon"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<div class="Embeddable__controls__bar">\n  <a class="Embeddable__button Embeddable__controls__unskip" href="#">\n    '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-unskip","Previous talk","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__play" href="#">\n    '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-play","Play","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__pause" href="#">\n    '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-pause","Pause","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__skip" href="#">\n    '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-skip","Next talk","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__volume" href="#">\n    '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-volume","Volume","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n  </a>\n\n  <span class="Embeddable__controls__timing">\n    <span class="Embeddable__controls__current">0:00</span>/<span class="Embeddable__controls__duration">0:00</span>\n  </span>\n\n  <div class="Embeddable__controls__secondary">\n    <a class="Embeddable__button Embeddable__controls__subtitles" href="#">\n      '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-subtitles","Subtitles","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__playlist" href="#">\n      '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-playlist","Show talks","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__fullscreen" href="#">\n      '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-fullscreen","Full screen","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__smallscreen" href="#">\n      '+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-fullscreen-exit","Exit full screen","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+"\n    </a>\n  </div>\n</div>\n"},useData:!0});return b.registerPartial("apps/embeddable/templates/controls",c),c}),define("apps/embeddable/views/controls",["./base","apps/embeddable/utils/toggle-class","apps/embeddable/utils/untoggle-class","utils/formatDuration","hbs!apps/embeddable/templates/controls"],function(a,b,c,d,e){"use strict";var f=a.extend({className:"Embeddable__controls",propsDefaults:{unskipEnabled:!1,playEnabled:!1,pauseEnabled:!1,skipEnabled:!1,volumeActive:!1,volumeEnabled:!1,volumeMuted:!1,timingEnabled:!0,subtitlesEnabled:!1,subtitlesActive:!1,subtitlesEffective:!1,playlistEnabled:!1,playlistActive:!1,fullscreenEnabled:!1,fullscreen:!1},propsEvents:{"change:unskipEnabled":"renderUnskip","change:playEnabled":"renderPlay","change:pauseEnabled":"renderPause","change:skipEnabled":"renderSkip","change:volumeEnabled":"renderVolume","change:volumeMuted":"renderVolume","change:volumeActive":b("a.Embeddable__controls__volume","Embeddable__button--active"),"change:timingEnabled":c("span.Embeddable__controls__timing","Embeddable__controls__timing--inapplicable"),"change:subtitlesEnabled":"renderSubtitles","change:subtitlesActive":b("a.Embeddable__controls__subtitles","Embeddable__button--active"),"change:subtitlesEffective":b("a.Embeddable__controls__subtitles","Embeddable__button--effective"),"change:playlistActive":b("a.Embeddable__controls__playlist","Embeddable__button--active"),"change:playlistEnabled":"renderPlaylist","change:fullscreenEnabled":"renderFullscreen","change:fullscreen":"renderFullscreen"},render:function(){return this.$el.html(e()),this.renderUnskip(),this.renderPlay(),this.renderPause(),this.renderSkip(),this.renderVolume(),this.renderSubtitles(),this.renderPlaylist(),this.renderFullscreen(),this},renderCurrent:function(a){this.find("span.Embeddable__controls__current").text(d(a))},renderDuration:function(a){this.find("span.Embeddable__controls__duration").text(d(a))},renderUnskip:c("a.Embeddable__controls__unskip","Embeddable__button--disabled"),renderPlay:c("a.Embeddable__controls__play","Embeddable__button--inapplicable"),renderPause:c("a.Embeddable__controls__pause","Embeddable__button--inapplicable"),renderSkip:c("a.Embeddable__controls__skip","Embeddable__button--disabled"),renderSubtitles:c("a.Embeddable__controls__subtitles","Embeddable__button--inapplicable"),renderPlaylist:c("a.Embeddable__controls__skip,a.Embeddable__controls__unskip,a.Embeddable__controls__playlist","Embeddable__button--inapplicable"),renderVolume:function(){var a=this.props.get("volumeEnabled"),b=this.props.get("volumeMuted");this.find("a.Embeddable__controls__volume")[a?"removeClass":"addClass"]("Embeddable__button--inapplicable")[b?"addClass":"removeClass"]("Embeddable__button--effective")},renderFullscreen:function(){var a=this.props.get("fullscreen"),b=this.props.get("fullscreenEnabled");this.$el[b&&a?"addClass":"removeClass"]("Embeddable__controls--fullscreen"),this.find("a.Embeddable__controls__fullscreen")[!b||a?"addClass":"removeClass"]("Embeddable__button--inapplicable"),this.find("a.Embeddable__controls__smallscreen")[b&&a?"removeClass":"addClass"]("Embeddable__button--inapplicable")}});return f}),define("apps/embeddable/views/play-button",["./base"],function(a){"use strict";var b=a.extend({className:"Embeddable__play-button g-button-play",propsDefaults:{enabled:!1,visible:!1},propsEvents:{"change:enabled":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__play-button--enabled")},"change:visible":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__play-button--visible")}}});return b}),define("utils/applyAll",["jquery"],function(a){"use strict";function b(c,d,e){var f,g;for(f=0,g=d.length;g>f;f++)a.isArray(d[f])?b(c,d[f],e):d[f].apply(c,e)}return b}),define("utils/throwError",[],function(){"use strict";return function(a){throw new Error("Error in TED: "+a)}}),define("lib/pubSub",["jquery","utils/applyAll","utils/throwError"],function(a,b,c){"use strict";function d(a){var d={publish:a.fire,subscribe:a.add,unsubscribe:a.remove},e=null;a.add(function(a){e=a}),d.read=function(){return e};var f;return d.publishUnique=function(){if(!window.JSON)return c("JSON object not available. You may need to shim it on this client."),!1;var b=Array.prototype.slice.call(arguments,0),d=JSON.stringify(b);d!==f&&(a.fire.apply(a,b),f=d)},d.once=function(){function c(){b(a,d,arguments),a.remove(c)}var d=arguments;return a.add(c)},d.future=function(){function c(){f&&b(a,e,arguments)}var d,e=arguments,f=!1;return d=a.add(c),f=!0,d},d}function e(b){var c,e=b&&f[b];return e||(c=a.Callbacks("memory"),e=d(c),b&&(f[b]=e)),e}var f={};return e._reset=function(){f={}},e}),define("lib/resize",["jquery","lodash","lib/pubSub"],function(a,b,c){"use strict";function d(a){for(var b,d=m;d--;)!b&&a>=l[d].at&&(b=l[d].its);c("sizeGroup").publishUnique(b)}function e(){var a=0,b=k;if(f=window.innerHeight,g=window.innerWidth||document.documentElement.clientWidth,j)a=i;else for(;b--;)!a&&g>=h[b]&&(a=h[b]);c("breakpoint").publishUnique(a),c("height").publishUnique(f),c("width").publishUnique(g)}var f,g,h=[320,480,600,768,1024,1200],i=1024,j=a("html").is(".oldie"),k=h.length,l=[{at:0,its:"oh"},{at:480,its:"xs"},{at:768,its:"sm"},{at:1024,its:"lg"}],m=l.length;return a(window).on("resize",b.throttle(e,100)),e(),c("breakpoint").subscribe(d),c}),define("apps/embeddable/views/expandable",["lodash","./base","lib/pubSub","lib/resize"],function(a,b,c){"use strict";var d=b.extend({className:"Embeddable__expandable",propsDefaults:{open:!1},propsEvents:{"change:open":function(a,b){this[b?"open":"close"]()}},open:function(){this._setCoords()},close:function(){this.$el.css("top","-100%")},anchorTo:function(a){this.$anchor=a,this._setCoords()},_setCoords:function(){var b=this.find("div.Embeddable__expandable__content");if(b.length&&this.$anchor&&this.props.get("open")){this._settedCoordsOnce||(this._setCoordsBound=a.bind(this._setCoords,this),c("height").future(this._setCoordsBound),c("width").future(this._setCoordsBound),this._settedCoordsOnce=!0);var d={},e=this.$anchor.offset(),f=e.left,g=e.top,h=b.outerHeight(),i=g-h;0>i?(d.top=0,d.height=g+"px"):(d.top=i,d.height="auto");var j=b.outerWidth(),k=c("width").read();0>k-f-j?(d.left="initial",d.right=0):(d.left=f,d.right="initial"),this.$el.css(d)}}});return d}),define("templates/helpers/formatDuration",["Handlebars","utils/formatDuration"],function(a,b){"use strict";a.registerHelper("formatDuration",b)}),define("hbs!templates/thumb",["hbs","hbs/handlebars","templates/helpers/formatDuration"],function(a,b){var c=b.template({1:function(a,b,c,d){return'    <span class="thumb__duration">\n      '+this.escapeExpression((b.formatDuration||a&&a.formatDuration||b.helperMissing).call(a,null!=a?a.playDuration:a,{name:"formatDuration",hash:{},data:d}))+"\n    </span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'\n<span class="thumb thumb--'+this.escapeExpression((f=null!=(f=b.ratio||(null!=a?a.ratio:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"ratio",hash:{},data:d}):f))+" "+this.escapeExpression((f=null!=(f=b.cropClass||(null!=a?a.cropClass:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"cropClass",hash:{},data:d}):f))+'">\n  <span class="thumb__sizer"><span class="thumb__tugger"><img src="'+this.escapeExpression((f=null!=(f=b.src||(null!=a?a.src:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"src",hash:{},data:d}):f))+'" class="thumb__image" alt=""><span class="thumb__aligner"></span></span></span>\n\n'+(null!=(e=b["if"].call(a,null!=a?a.playDuration:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"</span>\n"},useData:!0});return b.registerPartial("templates/thumb",c),c}),define("templates/helpers/thumb",["Handlebars","hbs!templates/thumb"],function(a,b){
"use strict";a.registerHelper("thumb",function(c,d,e){var f=e&&e>0?e:!1;return d=d||"video",new a.SafeString(b({cropClass:"video"===d?"thumb--crop-top":"",src:c,ratio:d,playDuration:f,playIcon:!f}))})}),define("hbs!apps/embeddable/templates/playlist",["hbs","hbs/handlebars","templates/helpers/thumb"],function(a,b){var c=b.template({1:function(a,b,c,d){var e;return'    <a class="undec Embeddable__playlist__talk" href="'+this.escapeExpression((e=null!=(e=b.canonical||(null!=a?a.canonical:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"canonical",hash:{},data:d}):e))+'" data-id="'+this.escapeExpression((e=null!=(e=b.id||(null!=a?a.id:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"id",hash:{},data:d}):e))+'">\n      <div class="media">\n        <div class="Embeddable__playlist__talk__image media__image media__image--thumb">\n          '+this.escapeExpression((b.thumb||a&&a.thumb||b.helperMissing).call(a,null!=a?a.thumb:a,null,null!=a?a.duration:a,{name:"thumb",hash:{},data:d}))+'\n        </div>\n\n        <div class="media__message">\n          <h4 class="Embeddable__playlist__talk__title">\n            '+this.escapeExpression(this.lambda(null!=a?a.speaker:a,a))+":\n            "+this.escapeExpression(this.lambda(null!=a?a.title:a,a))+"\n          </h4>\n        </div>\n      </div>\n    </a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'\n<div class="Embeddable__expandable__content Embeddable__playlist__bar">\n'+(null!=(e=b.each.call(a,null!=a?a.talks:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"</div>\n"},useData:!0});return b.registerPartial("apps/embeddable/templates/playlist",c),c}),define("apps/embeddable/views/playlist",["./expandable","hbs!apps/embeddable/templates/playlist"],function(a,b){"use strict";var c=a.extend({className:"Embeddable__expandable Embeddable__playlist",initialize:function(a){this.talks=a.talks,this.initializeState(),this.initializeProps()},render:function(){return this.$el.html(b({talks:this.talks.toJSON()})),this}});return c}),define("hbs!apps/embeddable/templates/subtitles",["hbs","hbs/handlebars"],function(a,b){var c=b.template({1:function(a,b,c,d){var e;return'      <li class="Embeddable__subtitles__item">\n        <a class="checkable Embeddable__subtitles__language" href="#" data-code="'+this.escapeExpression((e=null!=(e=b.languageCode||(null!=a?a.languageCode:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"languageCode",hash:{},data:d}):e))+'">\n          <span class="checkable__label">\n            '+this.escapeExpression((e=null!=(e=b.languageName||(null!=a?a.languageName:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"languageName",hash:{},data:d}):e))+"\n          </span>\n        </a>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'\n<div class="Embeddable__expandable__content">\n  <ul class="sl">\n    <li class="Embeddable__subtitles__item">\n      <a class="checkable Embeddable__subtitles__language" href="#">\n        <span class="checkable__label">\n          Turn subtitles off\n        </span>\n      </a>\n    </li>\n\n'+(null!=(e=b.each.call(a,null!=a?a.languages:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"  </ul>\n</div>\n"},useData:!0});return b.registerPartial("apps/embeddable/templates/subtitles",c),c}),define("apps/embeddable/views/subtitles",["./expandable","hbs!apps/embeddable/templates/subtitles"],function(a,b){"use strict";var c=a.extend({className:"Embeddable__expandable Embeddable__subtitles",propsDefaults:{activeSubtitle:null,languages:[]},propsEvents:{"change:activeSubtitle":"renderActiveSubtitle","change:languages":"render"},initialize:function(){this.adoptView(a),this.initializeProps(),this.initializeState()},render:function(){var a=this.props.get("languages");return a&&a.length&&(this.$el.html(b({languages:a})),this.renderActiveSubtitle()),this},renderActiveSubtitle:function(){var a=this.props.get("activeSubtitle"),b="Embeddable__subtitles__language--active checkable--checked",c=this.find("a.Embeddable__subtitles__language");c.removeClass(b),a&&c.filter("[data-code="+a+"]").addClass(b)}});return c}),define("hbs!apps/embeddable/templates/volume",["hbs","hbs/handlebars","templates/helpers/icon"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<div class="Embeddable__expandable__content Embeddable__volume__inner">\n  <div class="Embeddable__volume__meter"><div class="Embeddable__volume__meter__level"></div><div class="Embeddable__volume__slider"></div></div>\n\n  <a class="Embeddable__volume__unmute Embeddable__button Embeddable__button--effective" href="#">'+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-mute","Mute","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+'</a>\n  <a class="Embeddable__volume__mute Embeddable__button" href="#">'+this.escapeExpression((b.icon||a&&a.icon||b.helperMissing).call(a,"control-mute","Mute","Embeddable__button__icon",{name:"icon",hash:{},data:d}))+"</a>\n</div>\n"},useData:!0});return b.registerPartial("apps/embeddable/templates/volume",c),c}),define("deferLink",["jquery"],function(a){"use strict";function b(a){return function(b){return c.call(this,b,a)}}function c(b,c){function d(){var a=+e.data(h)-1;e.data(h,a),0>=a&&!e.data(j)&&(e.removeData(i),k.location.href=l)}var e="A"===this.nodeName?a(this):a(b.target).closest("a"),l=e.attr("href"),m=e.attr("target"),n=e.length&&l&&1===b.which&&!b.metaKey&&!b.shiftKey,o=c;if(a.isFunction(c)&&(o=c.call(this,b),o===!1))return!1;n&&b.isDefaultPrevented()&&!e.data(h)&&(n=!1),n&&m&&"_self"!==m&&(n=!1),n&&g&&e.is("[download]")&&(n=!1),n&&e.hasClass(f)&&(n=!1);var p=+(e.data(h)||0);n&&(e.data(h,p+1),o.when?("resolved"===o.state()&&d(),o.done(d)):a.isNumeric(o)?k.setTimeout(d,o):(n=!1,e.data(h,p))),n&&!p&&(b.preventDefault(),e.data(i,!0))}function d(d){return d.when||a.isNumeric(d)||a.isFunction(d)?b(d):void c.call(this,d,e)}var e=50,f="no-defer",g="download"in document.createElement("a"),h="defer-link-pends",i="defer-link-preventable",j="defer-link-prevented",k=window,l=a.Event.prototype.preventDefault;return a.Event.prototype.preventDefault=function(){var b=a(this.target);return b.data(i)&&b.data(j,!0),l.apply(this,Array.prototype.slice.call(arguments))},d}),define("lib/ga",["jquery","lodash","deferLink","lib/pubSub","lib/resize"],function(a,b,c,d){"use strict";function e(){(j[j.GoogleAnalyticsObject]||a.noop).apply(j,i.slice.call(arguments))}function f(){var a=i.slice.call(arguments),d=this;return function(f){return d.apply(e,a),b.has(f,"originalEvent")&&b.has(this,"nodeName")&&"click"===f.type?c.call(this,f):void 0}}function g(){var a,b=0;d("breakpoint").subscribe(function(c){e("set","dimension1",c),b++&&e.sendEvent("breakpoint","change",a+"|"+c,b),a=c})}function h(b){var c=a(this),d="ga-";b=a.extend(b||{},{category:c.data(d+"category"),action:c.data(d+"action"),label:c.data(d+"label")}),e.sendEvent(b.category,b.action,b.label)}var i=[],j=window;return b.assign(e,{send:b.partial(e,"send"),set:b.partial(e,"set"),sendEvent:b.partial(e,"send","event"),sendSocial:b.partial(e,"send","social")},function(a,b){return b.recall=f,b}),e.virtualPageview=function(a){e.set("page",a+(-1===a.indexOf("?")?"?":"&")+"vp"),e.send("pageview")},g(),e.send("pageview"),a(function(){a(document).on("click","a.ga-link",c(function(){return h.call(this,{action:"click",category:"site.link",label:this.href}),50}))}),e}),define("jqueryui/mouse",["jquery"],function(a){return function(a,b){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(a),a}),define("touchPunch",["jquery","jqueryui/mouse"],function(a,b){return function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind("touchstart",a.proxy(b,"_touchStart")).bind("touchmove",a.proxy(b,"_touchMove")).bind("touchend",a.proxy(b,"_touchEnd")),e.call(b)}}}(a),a}),define("widgets/slider",["jquery","jqueryui/widget","jqueryui/mouse","touchPunch"],function(a){"use strict";return a.widget("ted.slider",a.ui.mouse,{options:{distance:0,orientation:"horizontal",value:0,change:null,slide:null,start:null,stop:null},value:function(a){return arguments.length&&(this.options.value=a,this._refreshValue()),this.options.value},_change:function(a){this._trigger("change",a,this._getData({value:this.value()}))},_create:function(){this._detectOrientation(),this._mouseInit();var b=a("<div class=slider__progress></div>");this.progressElement=b,this.cursorElement=a("<div class=slider__cursor></div>").appendTo(this.progressElement),this.element.addClass("slider slider--"+this.orientation).append(this.progressElement)},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_getData:function(a){return a},_mouseCapture:function(a){var b,c;return this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),b={x:a.pageX,y:a.pageY},c=this._valueFromPosition(b),this._start(a),this._slide(a,c),!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._valueFromPosition(b);return this._slide(a,c),!1},_mouseStart:function(){return!0},_mouseStop:function(a){return this._mouseDrag(a),this._stop(a),this._change(a),!1},_refreshValue:function(){var a=this.value();this.progressElement.css("vertical"===this.orientation?"height":"width",100*a+"%")},_slide:function(a,b){this._trigger("slide",a,this._getData({value:b})),this.value(b)},_start:function(a){this.element.addClass("slider--active"),this._trigger("start",a)},_stop:function(a){this.element.removeClass("slider--active"),this._trigger("stop",a)},_valueFromPosition:function(a){var b,c,d;return"vertical"===this.orientation?(d=this.elementSize.height,c=a.y-this.elementOffset.top):(d=this.elementSize.width,c=a.x-this.elementOffset.left),b=c/d,b>1&&(b=1),0>b&&(b=0),"vertical"===this.orientation&&(b=1-b),b}}),function(b,c){return a(b).slider(c)}}),define("widgets/scrubber",["jquery","lib/ga","widgets/slider"],function(a,b){"use strict";var c="scrubber",d=c+"--active",e=c+"--hover",f=c+"__cursor",g=c+"__playhead",h=c+"__progress";return a.widget("ted.scrubber",a.ted.slider,{options:{duration:null,player:null},_isScrubbing:!1,_isSeeking:!1,_progress:0,_create:function(){this.options.player&&this._setPlayer(),this.playheadElement=a("<div class="+g+"></div>").prependTo(this.element),this._super(),this.element.addClass(c),this.cursorElement.addClass(f),this.progressElement.addClass(h),this._on(this._handleEvents)},_getData:function(b){return a.extend({cursor:b.value*this.options.duration,playhead:this._progress*this.options.duration,progress:this._progress,duration:this.options.duration},b)},_handleEvents:{mouseover:function(){this.element.addClass(e)},mouseout:function(){this.element.removeClass(e)},scrubberstart:function(){this.element.addClass(d),this._isScrubbing=!0},scrubberstop:function(){this.element.removeClass(d),this._isScrubbing=!1}},_setOption:function(a,b){this._super(a,b),"duration"===a&&this.progress(this._getData({value:this._progress}).playhead/b)},_setPlayer:function(){var c=this,d=a(this.options.player),e=d.player("talk");this.option("duration",e.duration),this._on({scrubberchange:function(a,c){d.player("seek",c.cursor),b.sendEvent("player","seek","scrubber",Math.round(c.cursor))}}),d.on("playertalk",function(a,b){c.option("duration",b.duration),c.progress(0)}).on("playerduration",function(a,b){c.option("duration",b.duration)}).on("playerseeking",function(){c._isSeeking=!0}).on("playerseeked",function(){c._isSeeking=!1}).on("playerprogress",function(a,b){c.progress(b.progress)})},isSeeking:function(a){return arguments.length&&(this._isSeeking=!!a),this._isScrubbing||this._isSeeking},progress:function(a){if(arguments.length){var b=100*a+"%";this.progressElement&&!this.isSeeking()&&this.progressElement.width(b),this.playheadElement&&this.playheadElement.width(b),this._progress=a,this._trigger("progress",null,this._getData({value:a}))}return this._progress}}),function(b,c){return a(b).scrubber(c)}}),define("apps/embeddable/views/volume",["./expandable","hbs!apps/embeddable/templates/volume","widgets/scrubber"],function(a,b){"use strict";var c=a.extend({className:"Embeddable__expandable Embeddable__volume",propsDefaults:{level:.5,muted:!1},propsEvents:{"change:level":"renderLevel","change:muted":"renderMuted"},initialize:function(){this.adoptView(a),this.initializeProps(),this.initializeState()},render:function(){return this.$el.html(b()),this.renderLevel(),this.find("div.Embeddable__volume__slider").scrubber({orientation:"vertical"}),this},renderLevel:function(){this.find("div.Embeddable__volume__meter__level").height(100*this.props.get("level")+"%")},renderMuted:function(){this.$el[this.props.get("muted")?"addClass":"removeClass"]("Embeddable__volume--muted")}});return c}),define("hbs!apps/embeddable/templates/scrubber",["hbs","hbs/handlebars"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<div class="Embeddable__scrubber__bar">\n  <div class="Embeddable__scrubber__meter"><div class="Embeddable__scrubber__meter__progress"></div></div>\n\n  <div class="Embeddable__scrubber__slider"></div>\n</div>\n'},useData:!0});return b.registerPartial("apps/embeddable/templates/scrubber",c),c}),define("apps/embeddable/views/scrubber",["./base","hbs!apps/embeddable/templates/scrubber","widgets/scrubber"],function(a,b){"use strict";var c=a.extend({className:"Embeddable__scrubber",events:{scrubberchange:function(){this.find("div.Embeddable__scrubber__slider").scrubber("progress",0)}},propsDefaults:{enabled:!0,currentTime:0,duration:0,fullscreen:!1},propsEvents:{"change:enabled":"renderEnabled","change:currentTime":"renderTime","change:duration":"renderTime","change:fullscreen":"renderFullscreen"},render:function(){return this.$el.html(b()),this.renderEnabled(),this.renderFullscreen(),this.find("div.Embeddable__scrubber__slider").scrubber(),this},renderEnabled:function(){this.$el[this.props.get("enabled")?"addClass":"removeClass"]("Embeddable__scrubber--enabled")},renderFullscreen:function(){this.$el[this.props.get("fullscreen")?"addClass":"removeClass"]("Embeddable__scrubber--fullscreen")},renderTime:function(){this.find("div.Embeddable__scrubber__meter__progress").width(this.props.get("currentTime")/this.props.get("duration")*100+"%")}});return c}),define("apps/embeddable/views/chrome",["./base","./controls","./play-button","./playlist","./subtitles","./volume","./scrubber"],function(a,b,c,d,e,f,g){"use strict";var h=a.extend({className:"Embeddable__chrome",events:{"click a":function(a){a.preventDefault()},"click a.Embeddable__controls__pause":function(){this.props.get("paused")||this.state.set("pausePending",!0)},"click a.Embeddable__controls__play":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__controls__skip":function(){var a=this.props.get("next");a&&(this.state.set("skipPending",!0),this.state.set("pendingTalk",a))},"click a.Embeddable__controls__unskip":function(){var a=this.props.get("prev");a&&(this.state.set("unskipPending",!0),this.state.set("pendingTalk",a))},"click a.Embeddable__controls__volume":function(){this.state.set("volumeOpen",!this.state.get("volumeOpen"))},"click a.Embeddable__controls__subtitles":function(){this.state.set("subtitlesOpen",!this.state.get("subtitlesOpen"))},"click a.Embeddable__controls__playlist":function(){this.state.set("playlistOpen",!this.state.get("playlistOpen"))},"click a.Embeddable__controls__fullscreen":function(){this.props.get("fullscreen")||this.state.set("fullscreenPending",!0)},"click a.Embeddable__controls__smallscreen":function(){this.props.get("fullscreen")&&this.state.set("smallscreenPending",!0)},"click div.Embeddable__play-button":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__playlist__talk":function(a){var b=+$(a.target).closest("a.Embeddable__playlist__talk").data("id");this.state.set("pendingTalk",this.talks.get(b))},"click a.Embeddable__subtitles__language":function(a){var b=$(a.target).closest("a.Embeddable__subtitles__language").data("code");b?this.props.get("subtitle")===b?this.state.set("pendingSubtitle",!1):this.state.set("pendingSubtitle",b):this.props.get("subtitle")&&this.state.set("pendingSubtitle",!1)},"click a.Embeddable__volume__mute":function(){this.props.get("muted")||this.state.set("mutePending",!0)},"click a.Embeddable__volume__unmute":function(){this.props.get("muted")&&this.state.set("unmutePending",!0)},"scrubberslide div.Embeddable__volume__slider":function(a,b){this.state.set("pendingVolume",b.value)},"scrubberchange div.Embeddable__scrubber__slider":function(a,b){var c=this.props.get("duration");c&&this.state.set("pendingSeek",b.value*c)}},stateDefaults:{pausePending:!1,playPending:!1,pendingTalk:null,skipPending:!1,unskipPending:!1,volumeOpen:!1,pendingVolume:null,mutePending:!1,unmutePending:!1,subtitlesAvailable:!1,subtitlesOpen:!1,pendingSubtitle:null,playlistOpen:!1,fullscreenPending:!1,smallscreenPending:!1,pendingSeek:null},stateEvents:{"on:playPending":function(){this.playButton.props.set("visible",!1)},"change:pendingTalk":function(a,b){null!==b&&this.state.set("playlistOpen",!1)},"change:volumeOpen":function(a,b){this.volume.props.set("open",b),this.controls.props.set("volumeActive",b),b&&(this.state.set("subtitlesOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingVolume":function(a,b){this.volume.props.set("level",b)},"change:subtitlesAvailable":"_checkSubtitles","change:subtitlesOpen":function(a,b){this.subtitles.props.set("open",b),this.controls.props.set("subtitlesActive",b),b&&(this.state.set("volumeOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingSubtitle":function(a,b){null!==b&&this.state.set("subtitlesOpen",!1)},"change:playlistOpen":function(a,b){this.playlist.props.set("open",b),this.controls.props.set("playlistActive",b),b&&(this.state.set("volumeOpen",!1),this.state.set("subtitlesOpen",!1))}},propsDefaults:{enabled:!0,activated:!1,hovering:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,next:null,prev:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1,postrolling:!1},propsEvents:{"change:enabled":"_setActivation","change:activated":"_setActivation","change:hovering":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__chrome--hovering")},"change:playing":function(){this._checkPlayPause()},"on:playing":function(){this.state.set("playPending",!1),this.playButton.props.set("visible",!1)},"on:paused":function(){this.state.set("pausePending",!1),this.playButton.props.set("enabled",!0),this.playButton.props.set("visible",!0)},"change:duration":function(a,b){this.controls.renderDuration(b),this.scrubber.props.set("duration",b)},"change:currentTime":function(a,b){this.controls.renderCurrent(b),this.scrubber.props.set("currentTime",b)},"change:talk":function(a,b){this.state.set("pendingTalk",null),this.state.set("skipPending",!1),this.state.set("unskipPending",!1);var c=b.get("languages");this.subtitles.props.set("languages",c||[]),this.state.set("subtitlesAvailable",c&&c.length>0)},"change:next":"_checkSkip","change:prev":"_checkSkip","change:volume":function(a,b){this.volume.props.set("level",b)},"change:canVolume":function(a,b){this.controls.props.set("volumeEnabled",b)},"change:muted":function(a,b){this.state.set("mutePending",!1),this.state.set("unmutePending",!1),this.volume.props.set("muted",b),this.controls.props.set("volumeMuted",b)},"change:subtitle":function(a,b){this.subtitles.props.set("activeSubtitle",b?b:null),this.controls.props.set("subtitlesEffective",!!b),this.state.set("pendingSubtitle",null)},"change:canSubtitle":"_checkSubtitles","change:fullscreen":function(a,b){this.state.set("fullscreenPending",!1),this.state.set("smallscreenPending",!1),this.controls.props.set("fullscreen",b),this.scrubber.props.set("fullscreen",b)},"change:canFullscreen":function(a,b){this.controls.props.set("fullscreenEnabled",b)},"change:postrolling":function(a,b){this.scrubber.props.set("enabled",!b),this.controls.props.set("timingEnabled",!b),this._checkPlayPause(),this._checkPlaylist(),this._checkSkip(),this._checkSubtitles()}},initialize:function(a){this.talks=a.talks,this.scrubber=new g,this.controls=new b,this.playButton=new c,this.playlist=new d({talks:this.talks}),this.subtitles=new e,this.volume=new f,this.initializeState(),this.initializeProps(),this.listenTo(this.talks,"add",this._checkPlaylist),this.listenTo(this.talks,"all",this._checkPlaylist),this.listenTo(this.talks,"reset",this._checkPlaylist)},render:function(){this.$el.append(this.playButton.$el),this.playButton.render(),this.$el.append(this.controls.$el),this.controls.render(),this.$el.append(this.scrubber.$el),this.scrubber.render(),this.$el.append(this.volume.$el),this.volume.render(),this.$el.append(this.playlist.$el),this.playlist.render(),this.$el.append(this.subtitles.$el),this.subtitles.render(),this.volume.anchorTo(this.controls.find("a.Embeddable__controls__volume")),this.subtitles.anchorTo(this.controls.find("a.Embeddable__controls__subtitles")),this.playlist.anchorTo(this.controls.find("a.Embeddable__controls__playlist"))},_checkPlaylist:function(){var a=this.talks.length>1,b=!!this.props.get("postrolling");this.controls.props.set("playlistEnabled",!b&&a)},_checkPlayPause:function(){var a=!!this.props.get("playing"),b=!!this.props.get("postrolling");this.controls.props.set("playEnabled",!b&&!a),this.controls.props.set("pauseEnabled",!b&&a)},_checkSkip:function(){var a=!!this.props.get("next"),b=!!this.props.get("prev"),c=!!this.props.get("postrolling");this.controls.props.set("skipEnabled",!c&&a),this.controls.props.set("unskipEnabled",!c&&b)},_checkSubtitles:function(){this.controls.props.set("subtitlesEnabled",!this.props.get("postrolling")&&this.state.get("subtitlesAvailable")&&this.props.get("canSubtitle"))},_setActivation:function(){var a=this.props.get("enabled")&&this.props.get("activated");this.$el[a?"addClass":"removeClass"]("Embeddable__chrome--activated")}});return h}),define("utils/is_mobile",[],function(){"use strict";function a(){return a.isIOS()||a.isAndroid()}function b(b){return!!a.ua.match(b)}var c=/Android/g,d=/(iPad|iPhone|iPod)/g;return a.isIOS=function(){return b(d)},a.isAndroid=function(){return b(c)},a.ua=window.navigator&&window.navigator.userAgent||"",a}),define("hbs!apps/embeddable/templates/player",["hbs","hbs/handlebars"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="Embeddable__player__object"></div>\n  </div>\n</div>\n'},useData:!0});return b.registerPartial("apps/embeddable/templates/player",c),c}),define("Modernizr",[],function(){"use strict";return window.Modernizr}),define("widgets/player/ga-tracker",["lodash","Modernizr","lib/ga"],function(a,b,c){"use strict";function d(a){this._data={currentPlayerTime:null,hasPlayed:!1,lastPlayedTalkId:null,lastChangedTalkId:null,lastLanguageCode:null,marks:null,markableProgress:[25,50,75,95],markableTimes:[],postRolling:!1},this._widget=a,this._resetMarks(),this._addHandlers()}return d.prototype._resetMarkableTimes=function(b){this._data.markableTimes=a.union([10,30,60,90],a.range(120,b+1,120))},d.prototype._resetMarks=function(){this._data.marks={times:{},progress:{},ads:{}}},d.prototype._incrementTalkViews=function(){var a=require("Cookies").get("__utma");if(a&&b.localstorage){var d=+a.split(".").pop(),e=window.localStorage,f="talkViews",g=(e.getItem(f)||"").split("|");2===g.length&&+g[0]===d?g[1]=+g[1]+1:g=[d,1],e.setItem(f,g.join("|")),c.set("metric1",g[1])}},d.prototype._onTalkChange=function(){this._data.postRolling=!1,this._resetMarks(),this._incrementTalkViews()},d.prototype._addHandlers=function(){var a=this,b={playererror:function(a,b){var d=b.error,e="abortive"===d.severity;(e||"fatal"===d.severity)&&c.sendEvent("player",e?"error.abort":"error.fatal",d.message)},playerenterfullscreen:function(){c.sendEvent("player","enterFullScreen")},playerexitfullscreen:function(){c.sendEvent("player","exitFullScreen")},playerplay:function(){var b=a._widget.options.currentTalk.id;c.sendEvent("player","start",a._data.hasPlayed?"subsequent":"initial"),a._data.hasPlayed=!0,a._data.lastPlayedTalkId!==b&&(c.sendEvent("player.talk","start",b),a._data.lastPlayedTalkId=b)},playerpause:function(){c.sendEvent("player","pause",Math.round(a._data.currentPlayerTime))},playerready:function(){var b=a._widget.mode();c.sendEvent("player","initialize",b,{nonInteraction:1})},playerrequestnext:function(){c.sendEvent("player","next",a._data.postRolling?"postroll":"talk")},playerrequestplay:function(){c.sendEvent("player","request",a._data.hasPlayed?"subsequent":"initial")},playerprogress:function(b,d){var e=100*d.progress,f=0,g=-1,h=a._data.markableProgress.length;if(!a._widget.player.postrolling)for(;a._data.marks&&++g<h&&e>f;)f=a._data.markableProgress[g],e>=f&&!a._data.marks.progress[f]&&(a._data.currentPlayerTime>a._widget.options.startTrackingAt&&c.sendEvent("player","progressPct",f+"%"),a._data.marks.progress[f]=!0)},playertalkcomplete:function(){a._data.marks&&!a._data.marks.progress[100]&&(c.sendEvent("player","progressPct","100%"),a._data.marks.progress[100]=!0,c.sendEvent("player.talk","complete",a._widget.options.currentTalk.id))},playercurrenttime:function(b,d){var e=d.currentTime,f=0,g=-1,h=a._data.markableTimes.length;if(a._data.currentPlayerTime=e,!a._widget.player.postrolling)for(;a._data.marks&&++g<h&&e>f;)f=a._data.markableTimes[g],e>=f&&!a._data.marks.times[f]&&(f>a._widget.options.startTrackingAt&&c.sendEvent("player","progressTime",f+" seconds"),a._data.marks.times[f]=!0)},playerprerollstart:function(){a._data.marks&&!a._data.marks.ads.prerollStart&&(c.sendEvent("player.preRoll","cardStart"),a._data.marks.ads.prerollStart=!0)},playerprerollblock:function(){a._data.marks&&!a._data.marks.ads.prerollBlock&&(c.sendEvent("player.preRoll","cardBlock"),a._data.marks.ads.prerollBlock=!0)},playerpostrollstart:function(){a._data.postRolling=!0,a._data.marks&&!a._data.marks.ads.postrollStart&&(c.sendEvent("player.postRoll","adStart"),a._data.marks.ads.postrollStart=!0)},playerpostrollcomplete:function(){a._data.postRolling=!1,a._data.marks&&!a._data.marks.ads.postrollComplete&&(c.sendEvent("player.postRoll","adComplete"),a._data.marks.ads.postrollStart=!0)},playeradblock:function(){c.sendEvent("player","adBlock")},playerduration:function(b,c){a._widget.player.postrolling||a._resetMarkableTimes(c.duration)},playersubtitle:function(b,d){var e=String(d.subtitle&&d.subtitle.languageCode);e!==a._data.lastLanguageCode&&(e?c.sendEvent("player.subtitle","setLanguage",e):c.sendEvent("player.subtitle","disable")),a._data.lastLanguageCode=e},playertalk:function(b,c){var d=c.id;a._data.lastChangedTalkId!==d&&(a._onTalkChange(),a._data.lastChangedTalkId=d)}};this._handlers=b,this._widget._on(b)},d}),function(a){"use strict";var b=function(a,c,d){return 1===arguments.length?b.get(a):b.set(a,c,d)};b._document=document,b._navigator=navigator,b.defaults={path:"/"},b.get=function(a){return b._cachedDocumentCookie!==b._document.cookie&&b._renewCache(),b._cache[a]},b.set=function(c,d,e){return e=b._getExtendedOptions(e),e.expires=b._getExpiresDate(d===a?-1:e.expires),b._document.cookie=b._generateCookieString(c,d,e),b},b.expire=function(c,d){return b.set(c,a,d)},b._getExtendedOptions=function(c){return{path:c&&c.path||b.defaults.path,domain:c&&c.domain||b.defaults.domain,expires:c&&c.expires||b.defaults.expires,secure:c&&c.secure!==a?c.secure:b.defaults.secure}},b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},b._getExpiresDate=function(a,c){switch(c=c||new Date,typeof a){case"number":a=new Date(c.getTime()+1e3*a);break;case"string":a=new Date(a)}if(a&&!b._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},b._generateCookieString=function(a,b,c){a=encodeURIComponent(a),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toGMTString():"",d+=c.secure?";secure":""},b._getCookieObjectFromString=function(c){for(var d={},e=c?c.split("; "):[],f=0;f<e.length;f++){var g=b._getKeyValuePairFromCookieString(e[f]);d[g.key]===a&&(d[g.key]=g.value)}return d},b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");return b=0>b?a.length:b,{key:decodeURIComponent(a.substr(0,b)),value:decodeURIComponent(a.substr(b+1))
}},b._renewCache=function(){b._cache=b._getCookieObjectFromString(b._document.cookie),b._cachedDocumentCookie=b._document.cookie},b._areEnabled=function(){return b._navigator.cookieEnabled||"1"===b.set("cookies.js",1).get("cookies.js")},b.enabled=b._areEnabled(),"function"==typeof define&&define.amd?define("Cookies",[],function(){return b}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.Cookies=b):window.Cookies=b}(),define("lib/currentUserId",["Cookies"],function(a){"use strict";var b="_ted_user_id";return{get:function(){return a.get(b)}}}),define("utils/ted",[],function(){"use strict";var a=function(){var a=window.navigator,b=a?a.userAgent.toLowerCase():"";if(-1!==b.indexOf("chrome"))return!1;var c=b.match(/macintosh.*os x.*applewebkit.*version\/([\d]+).*safari/);return c?!(+c[1]<7):!1};return function(b){return window.TED?"playerPath"===b?a()?window.TED.playerPathLocal:window.TED.playerPathRemote:window.TED[b]:""}}),define("widgets/player/ted-tracker",["jquery","lodash","lib/currentUserId","utils/ted"],function(a,b,c,d){"use strict";function e(a){var b=d("zone")||{};this._data={lastMetaTalkId:null,lastPlayTalkId:null,vmAPIKey:b.api_key||"unknown"},this._widget=a,this._addHandlers()}return e.prototype._sendVM=function(c){var d=b.extend({},c,{share_token:this._widget.options.shareToken});a.post("/talks/"+this._widget.talk().id+"/views",{view:d},null,"json")},e.prototype._recordViewID=function(){this._widget.options.recordInIdentity&&c.get()&&a.post("/talks/"+this._widget.talk().id+"/user_views",{},null,"json")},e.prototype._recordViewVM=function(){var a=this._widget.mode();if("hls"===a&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_html5_hls"}),"flash"===a&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_flash_hls"}),"h264"===a){var b=this._widget.options.currentTalk.resources.h264[0].bitrate;this._sendVM({apikey:this._data.vmAPIKey,format:"mp4",quality:b?b+"k":"variant",service:"ted_player_html5_mp4"})}},e.prototype._onTalkPlay=function(){this._recordViewID(),this._recordViewVM()},e.prototype._addHandlers=function(){var a=this,b={playerrequestplay:function(){a._widget._ytPlayer&&a._widget._ytPlayer.playVideo&&a._sendVM({apikey:"botw",service:"botw"})},playerplay:function(){var b=a._widget.options.currentTalk.id;a._data.lastPlayTalkId!==b&&(a._onTalkPlay(),a._data.lastPlayTalkId=b)}};this._handlers=b,this._widget._on(b)},e});var ns_=window.ns_=window.ns_||{};ns_.StreamSense=ns_.StreamSense||function(){function a(a,b){var d=a||"",e="undefined",f=k.comScore||k.sitestat||function(a){var b,d,f,g,h,j="comScore=",m=l.cookie,n="",o="indexOf",p="substring",r="length",s=c.browserAcceptsLargeURLs()?q.URL_LENGTH_LIMIT:q.RESTRICTED_URL_LENGTH_LIMIT,t="&ns_",u="&",v=k.encodeURIComponent||escape;if(m[o](j)+1)for(g=0,f=m.split(";"),h=f[r];h>g;g++)d=f[g][o](j),d+1&&(n=u+unescape(f[g][p](d+j[r])));a+=t+"_t="+ +new Date+t+"c="+(l.characterSet||l.defaultCharset||"")+n,a.length>s&&a.indexOf(u)>0&&(b=a.substr(0,s-8).lastIndexOf(u),a=(a.substring(0,b)+t+"cut="+v(a.substring(b+1))).substr(0,s)),i.httpGet(a),typeof ns_p===e&&(ns_p={src:a}),ns_p.lastMeasurement=a};if(typeof b!==e){var g=[],h=k.encodeURIComponent||escape;for(var j in b)b.hasOwnProperty(j)&&g.push(h(j)+"="+h(b[j]));/[\?\&]$/.test(d)||(d+="&"),d+=g.join("&")}return f(d)}function b(a,b){for(var d,e=k.encodeURIComponent||escape,f=[],g=q.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],m=j.split("&"),n=0,o=m.length;o>n;n++){var p=m[n].split("="),r=unescape(p[0]),s=unescape(p[1]);r&&(b[r]=s)}for(var t={},n=0,o=g.length;o>n;n++){var u=g[n];if(b.hasOwnProperty(u)){var v=b[u];"undefined"!=typeof v&&null!=v&&(t[u]=!0,f.push(e(u)+"="+e(b[u])))}}for(var u in b)if(!t[u]&&b.hasOwnProperty(u)){var v=b[u];"undefined"!=typeof v&&null!=v&&f.push(e(u)+"="+e(b[u]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(l.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(l.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(l.referrer):"");var w=c.browserAcceptsLargeURLs()?q.URL_LENGTH_LIMIT:q.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>w&&d.indexOf("&")>0){var x=d.substr(0,w-8).lastIndexOf("&");d=(d.substring(0,x)+"&ns_cut="+e(d.substring(x+1))).substr(0,w)}return d}var c=function(){var a={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},isNotEmpty:function(a){return"undefined"!=typeof a&&null!=a&&"undefined"!=typeof a.length&&a.length>0},indexOf:function(b,c){var d=-1;return a.forEach(c,function(a,c){a==b&&(d=c)}),d},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e)}catch(g){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b,c=0;for(var b in a)a.hasOwnProperty(b)&&c++;return c},log:function(a,b){if("undefined"!=typeof b&&b){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"==typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a},toString:function(b){if("undefined"==typeof b)return"undefined";if("string"==typeof b)return b;if("[object Array]"===Object.prototype.toString.call(b))return b.join(",");if(a.size(b)>0){var c="";for(var d in b)b.hasOwnProperty(d)&&(c+=d+":"+b[d]+";");return c}return b.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},safeGet:function(b,c){return c=a.exists(c)?c:"",a.exists(b)?b:c},getBrowserName:function(){var a,b,c=navigator.userAgent,d=navigator.appName;return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))&&(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)),d},getBrowserFullVersion:function(){var a,b,c,d,e,f=navigator.userAgent,g=navigator.appName,h=""+parseFloat(navigator.appVersion);return-1!=(c=f.indexOf("Opera"))?(h=f.substring(c+6),-1!=(c=f.indexOf("Version"))&&(h=f.substring(c+8))):-1!=(c=f.indexOf("OPR/"))?h=f.substring(c+4):-1!=(c=f.indexOf("Android"))?h=f.substring(c+11):-1!=(c=f.indexOf("Chrome"))?h=f.substring(c+7):-1!=(c=f.indexOf("Safari"))?(h=f.substring(c+7),-1!=(c=f.indexOf("Version"))&&(h=f.substring(c+8))):-1!=(c=f.indexOf("Firefox"))?h=f.substring(c+8):"Microsoft Internet Explorer"==g?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=e.exec(f)&&(h=parseFloat(RegExp.$1))):"Netscape"==g?(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=e.exec(f)&&(h=parseFloat(RegExp.$1))):(b=f.lastIndexOf(" ")+1)<(c=f.lastIndexOf("/"))&&(h=f.substring(c+1)),h=h.toString(),-1!=(d=h.indexOf(";"))&&(h=h.substring(0,d)),-1!=(d=h.indexOf(" "))&&(h=h.substring(0,d)),-1!=(d=h.indexOf(")"))&&(h=h.substring(0,d)),a=parseInt(""+h,10),isNaN(a)&&(h=""+parseFloat(navigator.appVersion)),h},browserAcceptsLargeURLs:function(){return null===window.ActiveXObject||!0}};return a}(),d=function(){var a="cs_",b=function(){var b="undefined"!=typeof localStorage?localStorage:{};c.extend(this,{get:function(c){return b[a+c]},set:function(c,d){b[a+c]=d},has:function(c){return a+c in b},remove:function(c){delete b[a+c]},clear:function(){for(var a in b)b.hasOwnProperty(a)&&delete b[a]}})};return b}(),e=function(a,b){var c=new Image;c.onload=function(){b&&b(200)},c.onerror=function(){b&&b()},c.src=a},f=function(a,b,c){c&&setTimeout(c,0)},g=function(){return{dir:function(a){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(a,b){return!1},read:function(a,b){return null}}}(),h=function(a,b){"undefined"!=typeof engine&&b&&setTimeout(b,0);var c=engine.createHttpClient(),d=c.createRequest("GET",a,null);d.start(),b&&setTimeout(b,0)},i=function(){var a={PLATFORM:"generic",httpGet:e,httpPost:f,Storage:d,IO:g,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(a){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return!1}};return a}(),j=function(){function a(){return"undefined"!=typeof engine&&"undefined"!=typeof engine.stats}function b(){return c.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:c.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function e(){if(null==i){var a=b();null!=a?(i=a,j="31",k=a):(i=+new Date+~~(1e3*Math.random()),j="72",k=null)}}var i=null,j=null,k=null;return{PLATFORM:"trilithium",httpGet:h,httpPost:f,Storage:d,IO:g,getCrossPublisherId:function(){return e(),k},getAppName:function(){return c.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(a){return c.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return e(),i},getVisitorIdSuffix:function(){return j},getDeviceName:function(){return c.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return c.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&"undefined"!=typeof screen.height&&"undefined"!=typeof screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:a}}();i.autoSelect=function(){j.isCompatible()&&c.extend(i,j)};var k,l,m="undefined"!=typeof window&&"undefined"!=typeof document;m?(k=window,l=document):(k={},l={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var c=c||{};c.filterMap=function(a,b){for(var d in a)-1==c.indexOf(d,b)&&delete a[d]},c.getKeys=function(a,b){var c,d=[];for(c in a)(!b||b.test(c))&&a.hasOwnProperty(c)&&(d[d.length]=c);return d};var n=function(){var a=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(b){return a[b]}}}(),o=function(){var a=[n.END,n.PLAY,n.PAUSE,n.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(b){return a[b]}}}(),p={ADPLAY:n.AD_PLAY,ADPAUSE:n.AD_PAUSE,ADEND:n.AD_END,ADCLICK:n.AD_CLICK},q={STREAMSENSE_VERSION:"4.1412.05",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},r=function(){var a=function(){function a(a,b){var c=b[a];null!=c&&(d[a]=c)}var b,d,e=this,f=0,g=0,h=0,i=0,j=0,k=0;c.extend(this,{reset:function(a){null!=a&&a.length>0?c.filterMap(d,a):d={},d.hasOwnProperty("ns_st_cl")||(d.ns_st_cl="0"),d.hasOwnProperty("ns_st_pn")||(d.ns_st_pn="1"),d.hasOwnProperty("ns_st_tp")||(d.ns_st_tp="1"),e.setPauses(0),e.setStarts(0),e.setBufferingTime(0),e.setBufferingTimestamp(-1),e.setPlaybackTime(0),e.setPlaybackTimestamp(-1)},setLabels:function(a,b){null!=a&&c.extend(d,a),e.setRegisters(d,b)},getLabels:function(){return d},setLabel:function(a,b){var c={};c[a]=b,e.setLabels(c,null)},getLabel:function(a){return d[a]},getClipId:function(){return("undefined"==typeof b||null==b)&&e.setClipId("1"),b},setClipId:function(a){b=a},setRegisters:function(b,c){var d=b.ns_st_cn;null!=d&&(e.setClipId(d),delete b.ns_st_cn),d=b.ns_st_bt,null!=d&&(h=Number(d),delete b.ns_st_bt),a("ns_st_cl",b),a("ns_st_pn",b),a("ns_st_tp",b),a("ns_st_ub",b),a("ns_st_br",b),c!=o.PLAYING&&null!=c||(d=b.ns_st_sq,null!=d&&(g=Number(d),delete b.ns_st_sq)),c!=o.BUFFERING&&(d=b.ns_st_pt,null!=d&&(j=Number(d),delete b.ns_st_pt)),c!=o.PAUSED&&c!=o.IDLE&&null!=c||(d=b.ns_st_pc,null!=d&&(f=Number(d),delete b.ns_st_pc))},createLabels:function(a,b){var d=b||{};return d.ns_st_cn=e.getClipId(),d.ns_st_bt=String(e.getBufferingTime()),a!=n.PLAY&&null!=a||(d.ns_st_sq=String(g)),a!=n.PAUSE&&a!=n.END&&a!=n.KEEP_ALIVE&&a!=n.HEART_BEAT&&null!=a||(d.ns_st_pt=String(e.getPlaybackTime()),d.ns_st_pc=String(f)),c.extend(d,e.getLabels()),d},incrementPauses:function(){f++},incrementStarts:function(){g++},getBufferingTime:function(){var a=h;return i>=0&&(a+=+new Date-i),a},setBufferingTime:function(a){h=a},getPlaybackTime:function(){var a=j;return k>=0&&(a+=+new Date-k),a},setPlaybackTime:function(a){j=a},getPlaybackTimestamp:function(){return k},setPlaybackTimestamp:function(a){k=a},getBufferingTimestamp:function(){return i},setBufferingTimestamp:function(a){i=a},getPauses:function(){return f},setPauses:function(a){f=a},getStarts:function(){return g},setStarts:function(a){g=a}}),d={},e.reset()};return a}(),s=function(){var a=function(){var a,b,d=this,e=null,f=0,g=0,h=0,i=0,j=0,k=0,l=!1;c.extend(this,{reset:function(a){null!=a&&a.length>0?c.filterMap(b,a):b={},d.setPlaylistId(+new Date+"_"+k),d.setBufferingTime(0),d.setPlaybackTime(0),d.setPauses(0),d.setStarts(0),d.setRebufferCount(0),l=!1},setLabels:function(a,e){null!=a&&c.extend(b,a),d.setRegisters(b,e)},getLabels:function(){return b},setLabel:function(a,b){var c={};c[a]=b,d.setLabels(c,null)},getLabel:function(a){return b[a]},getClip:function(){return e},getPlaylistId:function(){return a},setPlaylistId:function(b){a=b},setRegisters:function(b,c){var d=b.ns_st_sp;null!=d&&(f=Number(d),delete b.ns_st_sp),d=b.ns_st_bc,null!=d&&(h=Number(d),delete b.ns_st_bc),d=b.ns_st_bp,null!=d&&(i=Number(d),delete b.ns_st_bp),d=b.ns_st_id,null!=d&&(a=d,delete b.ns_st_id),c!=o.BUFFERING&&(d=b.ns_st_pa,null!=d&&(j=Number(d),delete b.ns_st_pa)),c!=o.PAUSED&&c!=o.IDLE&&null!=c||(d=b.ns_st_pp,null!=d&&(g=Number(d),delete b.ns_st_pp))},createLabels:function(b,e){var i=e||{};return i.ns_st_bp=String(d.getBufferingTime()),i.ns_st_sp=String(f),i.ns_st_id=String(a),h>0&&(i.ns_st_bc=String(h)),b!=n.PAUSE&&b!=n.END&&b!=n.KEEP_ALIVE&&b!=n.HEART_BEAT&&null!=b||(i.ns_st_pa=String(d.getPlaybackTime()),i.ns_st_pp=String(g)),b!=n.PLAY&&null!=b||d.didFirstPlayOccurred()||(i.ns_st_pb="1",d.setFirstPlayOccurred(!0)),c.extend(i,d.getLabels()),i},incrementStarts:function(){f++},incrementPauses:function(){g++,e.incrementPauses()},setPlaylistCounter:function(a){k=a},incrementPlaylistCounter:function(){k++},addPlaybackTime:function(a){if(e.getPlaybackTimestamp()>=0){var b=a-e.getPlaybackTimestamp();e.setPlaybackTimestamp(-1),e.setPlaybackTime(e.getPlaybackTime()+b),d.setPlaybackTime(d.getPlaybackTime()+b)}},addBufferingTime:function(a){if(e.getBufferingTimestamp()>=0){var b=a-e.getBufferingTimestamp();e.setBufferingTimestamp(-1),e.setBufferingTime(e.getBufferingTime()+b),d.setBufferingTime(d.getBufferingTime()+b)}},getBufferingTime:function(){var a=i;return e.getBufferingTimestamp()>=0&&(a+=+new Date-e.getBufferingTimestamp()),a},setBufferingTime:function(a){i=a},getPlaybackTime:function(){var a=j;return e.getPlaybackTimestamp()>=0&&(a+=+new Date-e.getPlaybackTimestamp()),a},setPlaybackTime:function(a){j=a},getStarts:function(){return f},setStarts:function(a){f=a},getPauses:function(){return g},setPauses:function(a){g=a},getRebufferCount:function(){return h},incrementRebufferCount:function(){h++},setRebufferCount:function(a){h=a},didFirstPlayOccurred:function(){return l},setFirstPlayOccurred:function(a){l=a}}),e=new r,b={},d.reset()};return a}(),t=function(){var d=function(d,e){function f(a){var b=0;if(null!=ma)for(var c=0;c<ma.length;c++){var d=ma[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b}function g(){l();var a=f(ja.getClip().getPlaybackTime());if(a>0){var b=pa>0?pa:a;Z=setTimeout(k,b)}pa=0}function h(){l();var a=f(ja.getClip().getPlaybackTime());pa=a-ja.getClip().getPlaybackTime()%a,null!=Z&&l()}function j(){pa=0,ra=0,qa=0}function k(){qa++;var a=N(n.HEART_BEAT,null);B(a),pa=0,g()}function l(){null!=Z&&(clearTimeout(Z),Z=null)}function m(){r(),Y=setTimeout(p,na)}function p(){var a=N(n.KEEP_ALIVE,null);B(a),ia++,m()}function r(){null!=Y&&(clearTimeout(Y),Y=null)}function t(){v(),da.isPauseOnBufferingEnabled()&&G(o.PAUSED)&&(X=setTimeout(u,oa))}function u(){if($==o.PLAYING){ja.incrementRebufferCount(),ja.incrementPauses();var a=N(n.PAUSE,null);B(a),ia++,$=o.PAUSED}}function v(){null!=X&&(clearTimeout(X),X=null)}function w(a){return a==o.PLAYING||a==o.PAUSED}function x(){T&&(clearTimeout(T),T=null)}function y(a){return a==n.PLAY?o.PLAYING:a==n.PAUSE?o.PAUSED:a==n.BUFFER?o.BUFFERING:a==n.END?o.IDLE:null}function z(a,b,d){if(x(),d)T=setTimeout(function(a,b){return function(){z(a,b)}}(a,b),d);else if(J(a)){var e=L(),f=ga,g=I(b),h=f>=0?g-f:0;E(L(),b),F(a,b),M(L()),K(a);for(var i=0,j=ca.length;j>i;i++)ca[i](e,a,b,h);A(b),ja.setRegisters(b,a),ja.getClip().setRegisters(b,a);var k=N(o.toEventType(a),b);c.extend(k,b),G(V)&&(B(k),$=V,ia++)}}function A(a){var b=a.ns_st_mp;null!=b&&(_=b,delete a.ns_st_mp),b=a.ns_st_mv,null!=b&&(aa=b,delete a.ns_st_mv),b=a.ns_st_ec,null!=b&&(ia=Number(b),delete a.ns_st_ec)}function B(a,c){void 0===c&&(c=!0),c&&D(a);var d=da.getPixelURL();if(W){if(!C()){var e=ta.am,f=ta.et,g=e.newApplicationMeasurement(W,f.HIDDEN,a,d);W.getQueue().offer(g)}}else d&&i.httpGet(b(d,a))}function C(){var a=W.getAppContext(),b=W.getSalt(),c=W.getPixelURL();return null==a||null==b||0==b.length||null==c||0==c.length}function D(a){ba=N(null),c.extend(ba,a)}function E(a,b){var d=I(b);if(a==o.PLAYING)ja.addPlaybackTime(d),h(),r();else if(a==o.BUFFERING)ja.addBufferingTime(d),v();else if(a==o.IDLE){var e=c.getKeys(ja.getClip().getLabels());ja.getClip().reset(e)}}function F(a,b){var c=I(b),d=H(b);ha=d,a==o.PLAYING?(g(),m(),ja.getClip().setPlaybackTimestamp(c),G(a)&&(ja.getClip().incrementStarts(),ja.getStarts()<1&&ja.setStarts(1))):a==o.PAUSED?G(a)&&ja.incrementPauses():a==o.BUFFERING?(ja.getClip().setBufferingTimestamp(c),la&&t()):a==o.IDLE&&j()}function G(a){return a!=o.PAUSED&&a!=o.IDLE||$!=o.IDLE&&null!=$?a!=o.BUFFERING&&$!=a:!1}function H(a){var b=-1;return a.hasOwnProperty("ns_st_po")&&(b=c.getInteger(a.ns_st_po)),b}function I(a){var b=-1;return a.hasOwnProperty("ns_ts")&&(b=Number(a.ns_ts)),b}function J(a){return null!=a&&L()!=a}function K(a){V=a,ga=+new Date}function L(){return V}function M(a){U=a}function N(){var a,b;1==arguments.length?(a=o.toEventType(V),b=arguments[0]):(a=arguments[0],b=arguments[1]);var d={};if("undefined"!=typeof document){var e=document;d.c7=e.URL,d.c8=e.title,d.c9=e.referrer}return null!=b&&c.extend(d,b),d.hasOwnProperty("ns_ts")||(d.ns_ts=String(+new Date)),null!=a&&!d.hasOwnProperty("ns_st_ev")&&(d.ns_st_ev=n.toString(a)),da.isPersistentLabelsShared()&&W&&c.extend(d,W.getLabels()),c.extend(d,da.getLabels()),O(a,d),ja.createLabels(a,d),ja.getClip().createLabels(a,d),d.hasOwnProperty("ns_st_mp")||(d.ns_st_mp=_),d.hasOwnProperty("ns_st_mv")||(d.ns_st_mv=aa),d.hasOwnProperty("ns_st_ub")||(d.ns_st_ub="0"),d.hasOwnProperty("ns_st_br")||(d.ns_st_br="0"),d.hasOwnProperty("ns_st_pn")||(d.ns_st_pn="1"),d.hasOwnProperty("ns_st_tp")||(d.ns_st_tp="1"),d.hasOwnProperty("ns_st_it")||(d.ns_st_it="c"),d.ns_st_sv=q.STREAMSENSE_VERSION,d.ns_type="hidden",d}function O(a,b){var d=b||{};if(d.ns_st_ec=String(ia),!d.hasOwnProperty("ns_st_po")){var e=ha,f=I(d);(a==n.PLAY||a==n.KEEP_ALIVE||a==n.HEART_BEAT||null==a&&V==o.PLAYING)&&(e+=f-ja.getClip().getPlaybackTimestamp()),d.ns_st_po=c.getInteger(e)}return a==n.HEART_BEAT&&(d.ns_st_hc=String(qa)),d}function P(a){var b=I(a);0>b&&(a.ns_ts=String(+new Date))}function Q(a,b,c){b=b||{},b.ns_st_ad=1,a>=n.AD_PLAY&&a<=n.AD_CLICK&&da.notify(a,b,c)}function R(a,b){da.notify(n.CUSTOM,a,b)}var S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=this,ea=500,fa=null,ga=0,ha=0,ia=0,ja=null,ka=!0,la=!0,ma=q.DEFAULT_HEARTBEAT_INTERVAL,na=q.DEFAULT_KEEP_ALIVE_INTERVAL,oa=q.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,pa=0,qa=0,ra=0,sa=!1,ta={};i.autoSelect(),c.extend(this,{reset:function(a){ja.reset(a),ja.setPlaylistCounter(0),ja.setPlaylistId(+new Date+"_1"),ja.getClip().reset(a),null==a||a.isEmpty()?S={}:c.filterMap(S,a),ia=1,qa=0,h(),j(),r(),v(),x(),V=o.IDLE,U=null,ga=-1,$=null,_=q.DEFAULT_PLAYERNAME,aa=q.STREAMSENSE_VERSION,ba=null},setPauseOnBufferingInterval:function(a){oa=a},getPauseOnBufferingInterval:function(){return oa},setKeepAliveInterval:function(a){na=a},getKeepAliveInterval:function(){return na},setHeartbeatIntervals:function(a){ma=a},notify:function(){var a,b,d,e;b=arguments[0],3==arguments.length?(d=arguments[1],e=arguments[2]):(d={},e=arguments[1]),a=y(b);var f=c.extend({},d);if(P(f),f.hasOwnProperty("ns_st_po")||(f.ns_st_po=c.getInteger(e).toString()),b==n.PLAY||b==n.PAUSE||b==n.BUFFER||b==n.END)da.isPausePlaySwitchDelayEnabled()&&w(V)&&w(a)&&(V!=o.PLAYING||a!=o.PAUSED||T)?z(a,f,ea):z(a,f);else{var g=N(b,f);c.extend(g,f),B(g,!1),ia++}},getLabels:function(){return S},getState:function(){return V},setLabels:function(a){null!=a&&(null==S?S=a:c.extend(S,a))},getLabel:function(a){return S[a]},setLabel:function(a,b){null==b?delete S[a]:S[a]=b},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?da.setLabel(h[0],b(h[1])):1==h.length&&da.setLabel(q.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return fa=a},getPixelURL:function(){return fa?fa:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?fa=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?fa=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPersistentLabelsShared:function(){return ka},setPersistentLabelsShared:function(a){ka=a},isPauseOnBufferingEnabled:function(){return la},setPauseOnBufferingEnabled:function(a){la=a},isPausePlaySwitchDelayEnabled:function(){return sa},setPausePlaySwitchDelayEnabled:function(a){sa=a},setPausePlaySwitchDelay:function(a){a&&a>0&&(ea=a)},getPausePlaySwitchDelay:function(){return ea},setClip:function(a,b){var c=!1;return V==o.IDLE&&(ja.getClip().reset(),ja.getClip().setLabels(a,null),b&&ja.incrementStarts(),c=!0),c},setPlaylist:function(a){var b=!1;return V==o.IDLE&&(ja.incrementPlaylistCounter(),ja.reset(),ja.getClip().reset(),ja.setLabels(a,null),b=!0),b},importState:function(a){reset();var b=c.extend({},a);ja.setRegisters(b,null),ja.getClip().setRegisters(b,null),A(b),ia++},exportState:function(){return ba},getVersion:function(){return q.STREAMSENSE_VERSION},addListener:function(a){ca.push(a)},removeListener:function(a){ca.splice(c.indexOf(a,ca),1)},getClip:function(){return ja.getClip()},getPlaylist:function(){return ja}}),c.extend(this,{adNotify:Q,customNotify:R,viewNotify:function(b,c){b=b||da.getPixelURL(),b&&a(b,c)}}),ns_.comScore&&(ta=ns_.comScore.exports,W=ta.c()),S={},ia=1,V=o.IDLE,ja=new s,X=null,la=!0,Z=null,qa=0,j(),Y=null,T=null,sa=!1,$=null,ha=0,ca=[],da.reset(),d&&da.setLabels(d),e&&da.setPixelURL(e)};return function(a){function b(a,b){return w[y]||e(a,b)}function d(){y=-1;for(var a=0;x>=a;a++)if(w.hasOwnProperty(a)){y=a;break}return ns_.StreamSense.activeIndex=y,y}function e(a,b){return a=a||null,b=b||null,a&&"object"==typeof a&&(b=a,a=null),w[++x]=new ns_.StreamSense(b,a),d(),w[x]}function f(){var a=!1,b=y;if("number"==typeof arguments[0]&&isFinite(arguments[0]))b=arguments[0];else if(arguments[0]instanceof ns_.StreamSense)for(var c in w)if(w[c]===arguments[0]){b=c;break}return w.hasOwnProperty(b)&&(a=w[b],delete w[b],a.reset(),d()),a}function g(a){return a=a||{},b().setPlaylist(a),b().getPlaylist()}function h(a,c,d){return a=a||{},"number"==typeof c&&(a.ns_st_cn=c),b().setClip(a,d),b().getClip()}function i(a,c,d){return"undefined"==typeof a?!1:(d=d||null,c=c||{},b().notify(a,c,d))}function j(a){"undefined"!=typeof a&&b().setLabels(a)}function k(){return b().getLabels()}function l(a){"undefined"!=typeof a&&b().getPlaylist().setLabels(a)}function m(){return b().getPlaylist().getLabels()}function n(a){"undefined"!=typeof a&&b().getClip().setLabels(a)}function o(){return b().getClip().getLabels()}function p(a){return b().reset(a||{})}function q(a){return b().getPlaylist().reset(a||{})}function r(a){return b().getClip().reset(a||{})}function s(a){return a=a||{},b().viewNotify(null,a)}function t(a,c){return arguments.length>2&&(a=arguments[1],c=arguments[2]),a=a||{},"number"==typeof c&&(a.ns_st_po=c),b().customNotify(a,c)}function u(){return b().exportState()}function v(a){b().importState(a)}var w={},x=-1,y=-1;c.extend(a,{activeIndex:y,newInstance:e,"new":e,destroyInstance:f,destroy:f,newPlaylist:g,newClip:h,notify:i,setLabels:j,getLabels:k,setPlaylistLabels:l,getPlaylistLabels:m,setClipLabels:n,getClipLabels:o,resetInstance:p,resetPlaylist:q,resetClip:r,viewEvent:s,customEvent:t,exportState:u,importState:v})}(d),d}();return t.AdEvents=p,t.PlayerEvents=n,ns_.StreamingTag=ns_.StreamingTag||function(){var a=function(){var a=function(a){function b(){if(!ns_.comScore&&c.exists(a))if(u=c.isTrue(a.debug),c.exists(a.customerC2)){var b=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");s.setPixelURL(b+".scorecardresearch.com/p?c1=2"),s.setLabel("c2",a.customerC2)}else s.setPixelURL(""),u&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.");s.setLabel("ns_st_it","r")}function d(a){return c.exists(a)||(a={}),c.exists(a.ns_st_ci)||(a.ns_st_ci="0"),c.exists(a.c3)||(a.c3="*null"),c.exists(a.c4)||(a.c4="*null"),c.exists(a.c6)||(a.c6="*null"),a}function e(a){return m>0&&a>=m?p+=a-m:p=0,p}function f(a){s.getState()!=o.IDLE&&s.getState()!=o.PAUSED?s.notify(n.END,e(a)):s.getState()==o.PAUSED&&s.notify(n.END,p)}function g(a){return h("ns_st_ci",q,a)&&h("c3",q,a)&&h("c4",q,a)&&h("c6",q,a)}function h(a,b,d){if(c.exists(a)&&c.exists(b)&&c.exists(d)){var e=b[a],f=d[a];return c.exists(e)&&c.exists(f)&&e===f}return!1}function i(a,b){f(a),l++;var d={ns_st_cn:l,ns_st_pn:"1",ns_st_tp:"0"};c.extend(d,b),s.setClip(d),q=b,m=a,p=0,s.notify(n.PLAY,p)}function j(a){var b=+new Date;f(b),l++,a=d(a);var e={ns_st_cn:l,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};c.extend(e,a),s.setClip(e),p=0,s.notify(n.PLAY,p),m=b,r=!1}function k(a,b){var c=+new Date;a=d(a),w==v.None&&(w=b),r&&w==b&&g(a)?(s.getClip().setLabels(a),s.getState()!=o.PLAYING&&(m=c,s.notify(n.PLAY,p))):i(c,a),r=!0,w=b}var l=0,m=0,p=0,q=null,r=!1,s=new t,u=!1,v={None:0,AudioContent:1,VideoContent:2},w=v.None;c.extend(this,{playAdvertisement:function(){u&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};j(a)},playVideoAdvertisement:function(a){var b={ns_st_ct:"va"};a&&c.extend(b,a),j(b)},playAudioAdvertisement:function(a){var b={ns_st_ct:"aa"};a&&c.extend(b,a),j(b)},playContentPart:function(a){u&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var b={ns_st_ct:"vc"};a&&c.extend(b,a),k(b,v.VideoContent)},playVideoContentPart:function(a){var b={ns_st_ct:"vc"};a&&c.extend(b,a),k(b,v.VideoContent)},playAudioContentPart:function(a){var b={ns_st_ct:"ac"};a&&c.extend(b,a),k(b,v.AudioContent)},stop:function(){var a=+new Date;s.notify(n.PAUSE,e(a))}}),b()};return function(a){}(a),a}();return a}(),t}(),define("vendor/stream_sense",[],function(){"use strict";return window.ns_}),define("lib/videoMetrix",["lodash","utils/ted","vendor/stream_sense","exports"],function(a,b,c,d){"use strict";d.init=function(a){this._init(),this._setContext(a)},d.start=function(){this._play()},d.stop=function(){this._tag&&this._tag.stop()},d.startAd=function(){this._asset.isInAd=!0,this._play()},d.stopAd=function(){this._asset.isInAd=!1,this._play()},d._meta=null,d._asset=null,d._tag=null,d._init=a.once(function(){d._tag=new c.StreamingTag({customerC2:b("csClientId")})}),d._setContext=function(a){var b={};a.talkId&&(b.ns_st_ci=a.talkId),this._meta=b,this._asset={isInAd:!1,isVideo:!0}},d._reset=function(){d._meta=null,d._asset=null,d._tag=null},d._play=function(){this._tag&&(this._asset.isInAd?this._asset.isVideo?this._tag.playVideoAdvertisement():this._tag.playAudioAdvertisement():this._asset.isVideo?this._tag.playVideoContentPart(this._meta):this._tag.playAudioContentPart(this._meta));
}}),define("widgets/player/cs-tracker",["jquery","utils/ted","lib/videoMetrix"],function(a,b,c){"use strict";function d(b){b._isInternal&&(this._data={lastMetaTalkId:null,lastPlayTalkId:null},this._widget=b,this._addHandlers(),a(window).unload(function(){c.stop()}))}return d.prototype._sendViewBeacon=function(a){var c=window.COMSCORE;c&&c.beacon&&c.beacon({c1:"1",c2:b("csClientId"),c5:"02",c6:a})},d.prototype._sendPostrollBeacon=function(){var a=window.COMSCORE;a&&a.beacon&&a.beacon({c1:"1",c2:b("csClientId"),c5:"10"})},d.prototype._onTalkPlay=function(a){this._sendViewBeacon(a)},d.prototype._addHandlers=function(){var a=this,b={playertalk:function(a,b){c.init({talkId:b.id})},playerplay:function(){var b=a._widget.options.currentTalk.id;a._data.lastPlayTalkId!==b&&(a._onTalkPlay(b),a._data.lastPlayTalkId=b),c.start()},playerpause:function(){c.stop()},playercomplete:function(){c.stop()},playerprerollstart:function(){c.startAd()},playerprerollcomplete:function(){c.stopAd()},playerpostrollstart:function(){a._sendPostrollBeacon(),c.startAd()},playerpostrollcomplete:function(){c.stopAd()}};this._handlers=b,this._widget._on(b)},d}),define("utils/f",[],function(){"use strict";var a=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a[b].apply(a,c)}};return a.create=function(a){return function(){var b=arguments,c=function(){return a.apply(this,b)};return c.prototype=a.prototype,new c}},a.get=function(a){return function(b){return b.get&&"function"==typeof b.get?b.get(a):b[a]&&"function"==typeof b[a]?b[a].call(b):b[a]}},a.splat=function(){var b=Array.prototype.slice.call(arguments);return function(c){for(var d=[],e=0;e<b.length;e++)d.push(a.get(b[e]).call(c));return d}},a.send=function(a){var b=Array.prototype.slice.call(arguments,1);return function(c){return c[a].apply(c,b)}},a.and=function(){var a=Array.prototype.slice.call(arguments);return function(b){for(var c=!0,d=0;d<a.length;d++)c=c&&a[d].call(null,b);return c}},a.not=function(a){return function(){return!a.apply(null,arguments)}},a.ascending=function(a,b){return a-b},a.descending=function(a,b){return b-a},a.truthy=function(a){return!!a},a.falsey=a.not(a.truthy),a}),define("player/topicFactory",["jquery"],function(a){"use strict";function b(c,d,e){var f,g;for(f=0,g=d.length;g>f;f++)a.isArray(d[f])?b(c,d[f],e):d[f].apply(c,e)}return function(c){var d={};return function(e){var f,g=e&&d[e];if(!g){f=a.Callbacks(c&&c.hasOwnProperty(e)?c[e]:"memory"),g={publish:f.fire,subscribe:f.add,unsubscribe:f.remove,once:function(){function a(){b(f,c,arguments),f.remove(a)}var c=arguments;return f.add(a)},publishUnique:function(){var a;return window.JSON?function(){var b=Array.prototype.slice.call(arguments,0),c=JSON.stringify(b);c!==a&&(f.fire.apply(f,b),a=c)}:!1}()};var h=null;f.add(function(a){h=a}),g.read=function(){return h},e&&(d[e]=g)}return g}}}),define("player/getFlashVars",["jquery"],function(a){"use strict";function b(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}return function(a){a.options;return b({serviceHost:"https://www.ted.com",volume:a.config.get("volume"),autoplay:0,fullscreenEnabled:a.canFullScreen?0:1})}}),define("player/handleError",["jquery"],function(a){"use strict";var b=window.console;return function(c){b&&b.log&&b.log("Player error:\n"+(c?c.stack||c.message||"unknown":"unknown")),a.post("//www.ted.com/error_collector.php",{message:c})}}),define("player/hlsVastParser",["jquery","./topicFactory","./handleError"],function(a,b,c){"use strict";function d(a){this.vast=a,this.topic=b({companion:void 0}),this.loadCompanions()}function e(a){this.vastData=a,this.url=this.vastData.find("IFrameResource").text()}a.extend(d.prototype,{loadCompanions:function(){var a=this;this.preroll=new e(this.vast.find("Companion[width=6][height=7]")),this.companion=new e(this.vast.find("Companion[width=6][height=8]")),this.companion.load(function(b){b&&a.topic("companion").publish(b)})},sponsor:function(){var a={},b=this.vast.find("AdParameters").text().split("=");return a[b[0]]=b[1],a},prerollUrl:function(){return[this.preroll.url]},impressionUrl:function(){return[this.vast.find("Impression").text()]},clickUrl:function(){return this.vast.find("ClickThrough").text()}});var f=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","rewind","pause","resume","fullscreen","creativeView"];return f.forEach&&f.forEach(function(b){d.prototype[b+"Url"]=function(){return a.makeArray(this.vast.find("Linear Tracking[event="+b+"]").map(function(b,c){return a(c).text()}))}}),a.extend(e.prototype,{load:function(b){var d=this;return""==this.url?b():void a.getJSON(this.url).done(function(a){d.ad=a.companion?{type:"companion-mobile",dimensions:{width:320,height:50},hasDisplay:!0,houseAd:!1,creative:[{density:1,url:a.companion.creative.standard},{density:2,url:a.companion.creative.standard_2x}],impression:null,thirdPartyImpressions:a.companion.impression,click:a.companion.click,lineItemId:null,creativeId:null}:a.ad,b(d.ad)}).fail(function(a,b,e){c({context:"hls",error:"Error retrieving companion ad",status:b,url:d.url})})}}),d}),define("player/hlsInitTalk",["jquery","./hlsVastParser","./handleError"],function(a,b,c){"use strict";function d(c){var d=new a.Deferred,e=d.promise();return c=c.replace("%5Bcorrelator%5D",Math.random().toFixed(12).substr(2)),a.ajax({url:c,timeout:2e3}).then(function(c){d.resolve(new b(a(c)))},function(a,b,c){d.reject(b,c)}),e}return function(b,e){var f,g,h=new a.Deferred,i=h.promise(),j={};try{g=b.currentTalk.resources.hls.stream,f=b.currentTalk.resources.hls.adUrl}catch(k){return b.throwError({type:"init",message:"Missing HLS stream resource.",severity:"fatal"}),h.reject(),i}return d(f).done(function(c){b.vastAd=c,a.extend(j,c.sponsor())}).fail(function(a,d){c({context:"hls",error:"Error retrieving VAST ad",status:a,url:b.currentTalk.resources.hls.adUrl})}).always(function(){e.attr("src",g+(-1===g.indexOf("?")?"?":"&")+a.param(j)),h.resolve()}),i}}),define("player/replaceElement",["jquery","./getFlashVars","./hlsVastParser","./hlsInitTalk","swfobject"],function(a,b,c,d){"use strict";function e(a){return a.id||(a.id="ted-player-"+i++),a.id}function f(a){var c={bgcolor:"#000000",quality:"high",wmode:"opaque",allowscriptaccess:"always",allowfullscreen:"true"},d=a.options,f=e(d.el);if("OBJECT"!==d.el.nodeName){var g=b(a),h=d.attrs;c.flashvars=g,h.data=d.swf,swfobject.createSWF(h,c,f)}a.el=document.getElementById(f),a.topic("ready.dom").publish()}function g(b){var c,d=b.options,f=a("<video>"),g=e(d.el);b.currentTalk=d.talks[0],c=b.currentTalk.resources.h264[0].file,f.attr(d.attrs),b.options.shareToken&&(c=c+"&share_token="+b.options.shareToken),f.attr("preload","none"),f.attr("src",c),f.attr("id",g),a(d.el).replaceWith(f),b.el=f[0],b.topic("ready.dom").publish()}function h(b){var c=b.options,f=a("<video>"),g=e(c.el);b.currentTalk=c.talks[0],f.attr(c.attrs),f.attr("id",g),d(b,f).always(function(){a(c.el).replaceWith(f),b.el=f[0],b.topic("ready.dom").publish()})}var i=Math.floor(9999*Math.random()),j={flash:f,h264:g,hls:h};return function(a){return j[a.mode]?j[a.mode](a):void a.throwError({type:"init",message:"Cannot replace element for unrecognized player mode: "+a.mode,severity:"fatal"})}}),define("player/getSupportedMode",["jquery","swfobject"],function(a){"use strict";function b(a){return c.canPlayType(a).replace(/^no$/,"")}var c=document.createElement("video"),d=["flash","h264","hls"];return function(e){var f=navigator.userAgent.toLowerCase(),g=f.indexOf("windows nt")>-1&&f.indexOf("; arm;")>-1;if(e.mode&&-1!==a.inArray(e.mode,d))return e.mode;if(!g&&-1===f.indexOf("android")&&swfobject.hasFlashPlayerVersion(e.flashVersion))return"flash";try{if(!c.canPlayType)return!1;if(-1===f.indexOf("android")&&-1===f.indexOf("googletv")&&(b("application/vnd.apple.mpegURL")||b("application/x-mpegURL")))return"hls";if(b('video/mp4; codecs="avc1.42E01E"'))return"h264"}catch(h){}return!1}}),define("player/checkRequiredParams",[],function(){"use strict";var a=["el","talks"];return function(b,c){for(var d=!0,e=a.length;e--;)b[a[e]]||(c({type:"init",message:"Required option property is missing: "+a[e],severity:"fatal"}),d=!1);return d}}),define("player/throttle",["jquery"],function(a){"use strict";return function(b,c,d,e){var f,g=0;"boolean"!=typeof c&&(e=d,d=c,c=void 0);var h=function(){function a(){g=+new Date,d.apply(i,k)}function h(){f=void 0}var i=this,j=+new Date-g,k=arguments;e&&!f&&a(),f&&clearTimeout(f),void 0===e&&j>b?a():c!==!0&&(f=setTimeout(e?h:a,void 0===e?b-j:b))};return a.guid&&(h.guid=d.guid=d.guid||a.guid++),h}}),define("player/flashifySource",[],function(){"use strict";return function(a){return a+(-1===a.indexOf("?")?"?":"&")+"preroll=Blank&qr&network=tv"}}),define("player/getTalk",[],function(){"use strict";return function(a,b,c){var d,e=a.options.talks,f=e.length;for(c||(c=0);f--;)if(d=e[f],d.id==b)return e[f+c]}}),define("player/getLanguage",[],function(){"use strict";return function(a,b){if(!a.languages||!b)return!1;for(var c=a.languages.length;c--;)if(a.languages[c].languageCode===b)return a.languages[c];return!1}}),define("player/addHandlersFlash",["jquery","./flashifySource","./throttle","./getTalk","./getLanguage"],function(a,b,c,d,e){"use strict";var f=c(100,function(a,b){a("currentTime").publishUnique(b)}),g=c(100,function(a,b){a("postrollRemaining").publishUnique(b)});return function(c){function h(b,h){switch(b){case"player.error":c.throwError(a.extend({},h,{type:"flash"}));break;case"player.pause":m=!1,i("pause").publish();break;case"player.seeked":c._isFirstPlaying||i("seeked").publish();break;case"player.seeking":c._isFirstPlaying||(i("seeking").publish(),m&&(n=!0));break;case"player.play":c._isFirstPlaying=!1,i("ready.seekable").publish(),j&&(i("bufferPlayable").publish(),j=!1),m=!0,!c._isRequestedPlay&&n||i("play").publish(),n=!1,c._isRequestedPlay=!1;break;case"player.complete":m=!1,i("complete").publish(c.currentTalk);break;case"player.talk.complete":m=!1,i("talkComplete").publish(c.currentTalk);break;case"player.ready":i("ready.flashInterface").publish();break;case"player.loaded":i("ready.flashTalk").publish();var o=d(c,h.talkId),p=c.config.get("languageCode"),q=e(o,p);c.currentTalk=o,i("talk").publishUnique(o),q||!o.isSubtitleRequired&&o.nativeLanguage===c.options.nativeLanguage||(q=e(o,c.options.nativeLanguage)),q?(c.el.setLanguage(q.languageCode,q.isRtl),i("subtitle").publishUnique(q)):c.el.setLanguage(null,null),l&&c.el.playVideo(),l=!0;break;case"player.metadata":i("duration").publishUnique(h.duration);break;case"player.timeupdate":f(i,h.time);break;case"player.volumechange":var r=Math.round(1e3*+h.volume)/1e3;(r>0||!k)&&i("volume").publishUnique(r);break;case"player.ad.preroll.block":i("adBlock").publish(),i("prerollBlock").publish();break;case"player.ad.preroll.start":i("prerollStart").publish();break;case"player.ad.preroll.end":i("prerollComplete").publish();break;case"player.ad.postroll.start":i("postrollStart").publish();break;case"player.ad.postroll.end":i("postrollComplete").publish();break;case"player.ad.postroll.duration":i("postrollDuration").publish(h.duration);break;case"player.ad.postroll.remaining":g(i,h.time);break;case"player.buffer.empty":j||(j=!0,i("bufferUnplayable").publish());break;case"player.mouse.down":c.postrolling?i("postrollClick").publish():c.toggle();break;case"player.metrics":i("metricsData").publish(h);break;case"player.metrics.toggle":i("metricsToggle").publish()}}var i=c.topic,j=!1,k=c.config.get("muted");i("muted").subscribe(function(a){k=a}),i("ready.flashInterface").once(function(){var a=c.currentTalk||c.options.talks[0];c.currentTalk=a,c.el.load(a.id,b(a.resources.hls.stream),a.introDuration,a.adDuration,a.postAdDuration)}),i("ready.flashTalk").once(function(){i("ready.handlers").publish()});var l,m,n;window.onPlayerEvent=function(a,b){try{h(a,b)}catch(d){if(!d)return;c.throwError({message:d.message,stack:d.stack})}};var o=c.options.history,p=[];if(o&&o.length)for(var q=-1,r=o.length;++q<r;)window.onPlayerEvent.apply(p.slice.apply(o[q]))}}),define("player/isLastTalk",[],function(){"use strict";return function(a){return a.currentTalk.id===a.options.talks[a.options.talks.length-1].id}}),define("player/addHandlersH264",["jquery","./throttle","./isLastTalk"],function(a,b,c){"use strict";function d(a){var b=a.topic,c={};b("play").subscribe(function(){c={}}),b("talkComplete.unnormalized").subscribe(function(){var d=a.currentTalk||{};c.id&&d.id==c.id||b("talkComplete").publish(d),c=d})}return function(c){var e=c.topic,f=c.el,g=a(f);d(c),a.each(["play","pause","seeked","seeking"],function(a,b){g.on(b,function(){e(b).publish()})}),g.on("canplay",function(){var a;return function(){a&&f.play(),a=!0}}()),g.on("timeupdate",b(100,function(){e("currentTime").publishUnique(f.currentTime)})),g.on("durationchange",function(){e("duration").publishUnique(f.duration)}),g.on("ended",function(){e("talkComplete.unnormalized").publish(),e("complete").publish(c.currentTalk)}),g.on("volumechange",function(){e("volume").publishUnique(Math.round(1e3*+f.volume)/1e3),e("muted").publishUnique(f.muted)}),g.on("loadedmetadata",function(){e("ready.seekable").publish()})}}),define("player/addHandlersHls",["jquery","./handleError"],function(a,b){"use strict";function c(d){var f=d.el,g=d.topic;a(f).on("error",function(a){b({context:"hls",error:"Error playing video",currentTime:f.currentTime,src:f.src,code:f.error?f.error.code:void 0})});var h;g("talk").subscribe(function(a){h!==a.id&&(e(d),h=a.id)}),g("currentTime").subscribe(c.checkAdEvents)}function d(a){var b=new Image;b.src=a}function e(e){function f(a){k.push(c.createAdEvent(a))}var g,h=e.topic,i=e.vastAd;c.adEvents=[];try{g=e.currentTalk.resources.hls.metadata}catch(j){return void e.throwError({type:"init",message:"Missing HLS metadata for current talk.",severity:"fatal"})}if(!i)return void e.throwError({type:"hls",message:"Error retrieving VAST ad on talk change."});i.topic("companion").subscribe(function(a){h("ad").publish(a)});var k=[];a.getJSON(g,i.sponsor()).then(function(a){var b=a.timing;f({startsAt:Math.floor(b.outro.end)-1,onFirstStart:function(){i.impressionUrl().forEach(d)}}),f({startsAt:8,endsAt:12,onFirstStart:function(){i.prerollUrl().forEach(d)},onEveryStart:function(){h("prerollStart").publish()},onEveryEnd:function(){h("prerollComplete").publish()}}),b.ad&&(f({startsAt:Math.floor(b.ad.start),endsAt:Math.floor(b.ad.end),onFirstStart:function(){i.startUrl().forEach(d),i.creativeViewUrl().forEach(d)},onEveryStart:function(){h("talkComplete.unnormalized").publish(),h("postrollStart").publish()},onEveryEnd:function(){h("postrollComplete").publish()}}),f({startsAt:Math.floor(b.ad.start+(b.ad.end-b.ad.start)/4),endsAt:Math.floor(b.ad.end),onFirstStart:function(){i.firstQuartileUrl().forEach(d)}}),f({startsAt:Math.floor(b.ad.start+(b.ad.end-b.ad.start)/2),endsAt:Math.floor(b.ad.end),onFirstStart:function(){i.midpointUrl().forEach(d)}}),f({startsAt:Math.floor(b.ad.start+3*(b.ad.end-b.ad.start)/4),endsAt:Math.floor(b.ad.end),onFirstStart:function(){i.thirdQuartileUrl().forEach(d)}}),f({startsAt:Math.floor(b.ad.end)-1,endsAt:Math.floor(b.ad.end),onFirstStart:function(){i.completeUrl().forEach(d)}})),c.adEvents=k}).fail(function(a,c,d){b({context:"hls",error:"Error retrieving HLS metadata",status:c,uri:g,query:i.sponsor()})})}function f(a){a.isCurrent||(a.onEveryStart(),a.hasEverStarted||(a.onFirstStart(),a.hasEverStarted=!0),a.isCurrent=!0)}function g(a){a.isCurrent&&(a.onEveryEnd(),a.hasEverEnded||(a.onFirstEnd(),a.hasEverEnded=!0),a.isCurrent=!1)}return c.adEvents=[],c.createAdEvent=function(b){return a.extend({startsAt:0,endsAt:-1,onFirstStart:a.noop,onFirstEnd:a.noop,onEveryStart:a.noop,onEveryEnd:a.noop},b,{isCurrent:!1,hasEverStarted:!1,hasEverEnded:!1})},c.checkAdEvents=function(a){for(var b,d=c.adEvents,e=d.length,h=0;e>h;h++)b=d[h],a>=b.startsAt&&(a<b.endsAt||-1===b.endsAt)?f(b):b.isCurrent&&g(b)},c}),define("player/addHandlers",["./throttle","./addHandlersFlash","./addHandlersH264","./addHandlersHls","./isLastTalk"],function(a,b,c,d,e){"use strict";function f(b){var c,d,e=a(100,function(){c&&d&&b("progress").publishUnique(c/d)});b("currentTime").subscribe(function(a){c=a,e()}),b("duration").subscribe(function(a){d=a,c=0,e()}),b("progress").publish(0)}return function(a){var g=a.mode,h=a.topic;switch(g){case"flash":b(a);break;case"h264":c(a);break;case"hls":c(a),d(a);break;default:return void a.throwError({type:"init",message:"No handlers found for unrecognized player mode: "+g,severity:"fatal"})}"flash"!==g&&h("ready.handlers").publish(),a.options.talks[0]&&h("duration").publish(a.options.talks[0].duration),h("duration").subscribe(function(b){a.currentTalk?a.currentTalk.duration=b:a.options.talks[0].duration=b}),h("complete").subscribe(function(){e(a)?h("ended").publish(a.currentTalk):a.playNext()}),f(h),h("postrollStart").subscribe(function(){a.postrolling=!0}),h("postrollComplete").subscribe(function(){a.postrolling=!1}),h("talk").subscribe(function(){a.postrolling=!1})}}),define("player/actionsFlash",["jquery","./flashifySource","./getTalk","./getLanguage"],function(a,b,c,d){"use strict";var e={};return a.each({pause:"pauseVideo",seek:"seek",sendAds:"sendAds",capQualityToStage:"capQualityToStage"},function(a,b){e[a]=function(){var a=this.el[b];a&&a.apply(this.el,[].slice.call(arguments))}}),e.play=function(){this._isRequestedPlay=!0,this.lastPlayedTalkId==(this.currentTalk&&this.currentTalk.id)?this.el.resumeVideo():(this._isFirstPlaying=!0,this.el.playVideo())},e.playTalk=function(a){var d=c(this,a);d&&this.currentTalk!=d?(this._isFirstPlaying=!0,this.currentTalk=d,this.el.load(d.id,b(d.resources.hls.stream),d.introDuration,d.adDuration,d.postAdDuration)):this.play()},e.mute=function(a){this.el.volume(a?0:this.config.get("volume"))},e.subtitle=function(a){var b=d(this.currentTalk,a);b?this.el.setLanguage(b.languageCode,b.isRtl):this.el.setLanguage(null,null),this.config.set("languageCode",b?b.languageCode:!1),this.topic("subtitle").publishUnique(b)},e.volume=function(a){this.el.volume(a)},e._playbackRate=function(){},e}),define("player/actionsH264",["jquery","./getTalk"],function(a,b){"use strict";var c={};return c.play=function(){this.topic("talk").publishUnique(this.currentTalk),this.el.play()},c.pause=function(){this.el.pause()},c.playTalk=function(a){var c=b(this,a);c&&(this.currentTalk=c,this.topic("talk").publishUnique(c),this.el.src=c.resources.h264[0].file)},c.mute=function(a){this.el.muted=a},c.seek=function(a){this.el.currentTime=a},c.volume=function(a){this.el.volume=a},c._playbackRate=function(a){this.el.playbackRate=a},c}),define("player/actionsHls",["jquery","./getTalk","./hlsInitTalk"],function(a,b,c){"use strict";var d={};return d.play=function(){this.topic("talk").publishUnique(this.currentTalk),this.el.play()},d.pause=function(){this.el.pause()},d.playTalk=function(d){var e=b(this,d),f=this.topic;e&&this.currentTalk!=e?(this.currentTalk=e,c(this,a(this.el)).always(function(){f("talk").publishUnique(e)})):this.play()},d.playNext=function(){var a=b(this,this.currentTalk.id,1);a&&this.playTalk(a.id)},d.playPrev=function(){var a=b(this,this.currentTalk.id,-1);a&&this.playTalk(a.id)},d.mute=function(a){this.el.muted=a},d.seek=function(a){this.el.currentTime=a},d.volume=function(a){this.el.volume=a},d._playbackRate=function(a){this.el.playbackRate=a},d}),define("player/getFullScreenActions",["jquery"],function(a){"use strict";function b(b){function c(){b.topic("enterFullScreen").publish(),b.isFullScreen=!0}function d(){b.topic("exitFullScreen").publish(),b.isFullScreen=!1}var e=document,g=b.fullScreenMode,h=f[g];"webkitVideo"===g?(a(b.el).on("webkitbeginfullscreen",c),a(b.el).on("webkitendfullscreen",d)):h&&a(e).on(h.change,function(){e[h.element]===b.fullScreenElement?c():!e[h.element]&&b.isFullScreen&&d()})}function c(a){function b(){c.webkitEnterFullscreen()}var c=a.el;c.readyState>=1?b(a):(c.addEventListener("loadedmetadata",b,!1),a.play())}function d(a){var b=a.fullScreenMode,c=window.document;"webkitVideo"===b?a.el.webkitExitFullscreen():f[b]&&c[f[b].cancel]()}function e(a){var b=a.fullScreenMode;"webkitVideo"===b?c(a):f[b]?a.fullScreenElement[f[b].request]():a.throwError({type:"client",message:"Full screen mode not supported",severity:"warning"})}var f={standard:{cancel:"cancelFullScreen",change:"fullscreenchange",enabled:"fullscreenEnabled",error:"fullscreenerror",element:"fullscreenElement",request:"requestFullScreen"},moz:{cancel:"mozCancelFullScreen",change:"mozfullscreenchange",enabled:"mozFullScreenEnabled",error:"mozfullscreenerror",element:"mozFullScreenElement",request:"mozRequestFullScreen"},ms:{cancel:"msExitFullscreen",change:"MSFullscreenChange",enabled:"msFullscreenEnabled",error:"MSFullscreenError",element:"msFullscreenElement",request:"msRequestFullscreen"},webkit:{cancel:"webkitCancelFullScreen",change:"webkitfullscreenchange",enabled:"webkitFullscreenEnabled",error:"webkitfullscreenerror",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen"}};return function(a){return b(a),{requestFullScreen:function(b){a.fullScreenElement||(a.fullScreenElement=b||a.el),e(a)},cancelFullScreen:function(){d(a)}}}}),define("player/addActions",["jquery","./actionsFlash","./actionsH264","./actionsHls","./getTalk","./getFullScreenActions"],function(a,b,c,d,e,f){"use strict";var g={flash:b,h264:c,hls:d};return function(a){function b(b){for(var c=-1,d=b.length;++c<d;)b[c].callback.apply(a,b[c].args)}function c(b){return function(){var c=[].slice.call(arguments);return j?b.apply(a,c):i.push({callback:b,args:c}),a}}var d=a.mode,h=g[d],i=[],j=!1;if(!h)return void a.throwError({type:"init",message:"No actions found for unrecognized player mode: "+d,severity:"fatal"});a.topic("ready").once(function(){j=!0,b(i)}),a.topic("play").subscribe(function(){a.lastPlayedTalkId=a.currentTalk&&a.currentTalk.id}),h.play=function(){var b=h.play,c=!1;return a.topic("ended").subscribe(function(){c=!0}),a.topic("play").subscribe(function(){c=!1}),function(){c&&h.seek(0),b.call(a)}}(),h.playNext=function(){var b=e(a,a.currentTalk.id,1);b&&a.playTalk(b.id)},h.playPrev=function(){var b=e(a,a.currentTalk.id,-1);b&&a.playTalk(b.id)},h.playbackRate=function(b){a.topic("playbackRate").publish(b)},h.volume=function(){var b=h.volume;return function(c){c=Math.round(1e3*+c)/1e3,0>c&&(c=0),c>1&&(c=1),b.call(a,c),a.topic("volume").publishUnique(c)}}(),h.mute=function(){var b=h.mute;return function(c){c=!!c,b.call(a,c),a.topic("muted").publishUnique(c)}}(),h.seek=function(){var b=h.seek,c=0;return a.topic("duration").subscribe(function(a){c=a}),function(d){d=+d,0>d&&(d=0),d>c&&(d=c),b.call(a,d)}}(),h.seek=function(){var b=h.seek,c=!1,d=!1;return a.topic("ready.seekable").once(function(){c!==!1&&b.call(a,c),d=!0}),function(e){d?b.call(a,e):c=e}}(),h.toggle=function(){a.paused?a.play():a.pause()};var k=f(a);h.requestFullScreen=k.requestFullScreen,h.cancelFullScreen=k.cancelFullScreen;for(var l in h)h.hasOwnProperty(l)&&(a[l]=c(h[l]))}}),define("player/addProperties",[],function(){"use strict";function a(){return d.requestFullScreen?!!c.fullscreenEnabled&&"standard":d.mozRequestFullScreen?!!c.mozFullScreenEnabled&&"moz":d.webkitRequestFullScreen?!!c.webkitFullscreenEnabled&&"webkit":d.webkitEnterFullscreen?"webkitVideo":d.msRequestFullscreen?!!c.msFullscreenEnabled&&"ms":!1}function b(){return!(!d.playbackRate||d.playbackRate!==d.defaultPlaybackRate)}var c=document,d=c.createElement("video");return function(c){c.fullScreenMode=a(),c.canFullScreen=c.fullScreenMode!==!1,c.mode=c.options.mode,c.talks=c.options.talks,c.canPlaybackRate="hls"===c.mode||"h264"===c.mode?b():!1,c.postrolling=!1,c.paused=!0,c.on("play",function(){c.paused=!1}).on("pause",function(){c.paused=!0})}}),define("player/addPlaybackRate",[],function(){"use strict";var a=1;return function(b){function c(){return b.config.get("playbackRate")}function d(){g?b._playbackRate(a):b._playbackRate(c())}function e(){g=!1,d()}function f(){g=!0,d()}var g=!1;b.on("ready",function(){b.playbackRate(c())}),b.on("play",d),b.on("prerollStart",f),b.on("postrollStart",f),b.on("prerollComplete",e),b.on("postrollComplete",e),b.on("playbackRate",function(a){b.config.set("playbackRate",a),d()})}}),define("player/addVolume",[],function(){"use strict";return function(a){var b=!1;a.on("ready",function(){a.volume(a.config.get("volume")),a.mute(a.config.get("muted"))}).on("muted",function(c){b=c,a.config.set("muted",c)}).on("volume",function(c){a.config.set("volume",c),c>0&&b&&a.mute(!1)})}}),define("player/augmentTalks",[],function(){"use strict";return function(a){if(!a||!a.length)return[];for(var b,c=a.length,d=c;d--;)b=a[d],b.index=d;return a}}),define("player/addInitPromise",["jquery"],function(a){"use strict";return function(b){var c=new a.Deferred;b.on("error",function(a){c.rejectWith(b,[a])}),b.on("ready",function(){"pending"===c.state()&&c.resolveWith(b,[b])}),a.extend(b,c.promise())}}),define("player/addThrower",["jquery","./handleError"],function(a,b){"use strict";return function(c){var d=!0;c.one("play",function(){d=!1}),c.throwError=function(e){e=a.extend({type:"unknown",message:null,severity:"warning"},e||{}),d&&"fatal"===e.severity&&(e.severity="abortive"),b(a.extend({context:"ted_player_wrapper"},e)),c.topic("error").publish(e)}}}),define("player/Config",["jquery"],function(a){"use strict";function b(a){return!!(a&&a.getItem&&a.setItem&&window.JSON&&JSON.parse&&JSON.stringify)}function c(c,d){if(b(c)){var e=c.getItem(d);if("string"===a.type(e)&&(e=JSON.parse(e),"object"===a.type(e)))return e}return{}}function d(c,d,e){b(c)&&"object"===a.type(e)&&c.setItem(d,JSON.stringify(e))}function e(a){this._options=a,this._inited=!1}return a.extend(e.prototype,{_init:function(){this._inited||(this.internal=a.extend({},this._options.defaults,c(this._options.storageAdapter,this._options.storageProperty)),this._inited=!0)},get:function(a){return this._init(),this.internal[a]},set:function(a,b){this._init(),this.internal[a]=b,d(this._options.storageAdapter,this._options.storageProperty,this.internal)}}),e}),define("player/Player",["jquery","./topicFactory","./replaceElement","./getSupportedMode","./checkRequiredParams","./addHandlers","./addActions","./addProperties","./addPlaybackRate","./addVolume","./augmentTalks","./isLastTalk","./addInitPromise","./addThrower","./Config"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(l){var p=this;this.topic=b({bufferPlayable:void 0,bufferUnplayable:void 0,play:void 0,pause:void 0,prerollStart:void 0,prerollBlock:void 0,postrollStart:void 0,postrollEnd:void 0,adBlock:void 0,seeked:void 0,seeking:void 0}),n(p);var q=!1;this.topic("error").subscribe(function(a){"abortive"===a.severity&&(q=!0)}),m(p),l=a.extend({},t,l),e(l,p.throwError),l.mode=d(l),l.mode||p.throwError({type:"client",message:"Client does not support any player mode.",severity:"fatal"}),l.talks=k(l.talks),l.talks.length||p.throwError({type:"init",message:"No talks sent to player.",severity:"fatal"}),this.options=l,this.config=new o(a.extend({defaults:{languageCode:!1,muted:!1,volume:l.defaultVolume,playbackRate:l.defaultPlaybackRate}},l)),h(this),g(p),j(p),i(p),q||(this.topic("ready.dom").once(function(){window.setTimeout(function(){f(p),p.topic("ready.handlers").once(function(){q||p.topic("ready").publish()})},10)}),c(this))}var q,r=function(){var a=document.createElement("video");return a&&a.defaultPlaybackRate?a.defaultPlaybackRate:1}();try{q=window.localStorage}catch(s){}var t={attrs:{},defaultPlaybackRate:r,defaultVolume:.5,el:null,flashVersion:"11.1.0",nativeLanguage:"en",storageAdapter:q,storageProperty:"playerconfig",swf:"assets/player.swf"};a.extend(p.prototype,{on:function(a,b){return this.topic(a).subscribe(b),this},one:function(a,b){return this.topic(a).once(b),this},isLastTalk:function(){return l(this)}});b();return p}),define("jqueryui/core",["jquery"],function(a){return function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;
return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(a),a}),define("lib/focus-zone",["jquery","lodash","jqueryui/core"],function(a,b){"use strict";function c(b){this.$el=a(b)}function d(a){a.preventDefault()}var e=a(window);return c.__reset=function(){b.assign(c,{__active:void 0,__isListening:!1,__zones:[]})},c.__addZone=function(a){c.__zones.push(a),c.__setActive(),c.__startListening()},c.__removeZone=function(a){c.__zones=b.without(c.__zones,a),c.__setActive(),c.__stopListening()},c.__setActive=function(){c.__active=b.last(c.__zones)},c.__startListening=function(){c.__isListening||c.__active&&(c.__startListeningInner(),c.__isListening=!0)},c.__startListeningInner=function(){e.on("keydown",c.__keyDown)},c.__stopListening=function(){c.__isListening&&(c.__active||(c.__stopListeningInner(),c.__isListening=!1))},c.__stopListeningInner=function(){e.off("keydown",c.__keyDown)},c.__keyDown=function(e){var f=c.__active;if(f&&e.keyCode===a.ui.keyCode.TAB){var g=e.target,h=f.$el,i=h.find(":tabbable"),j=i.filter(":first"),k=i.filter(":last");g!==k[0]&&g!==h[0]||e.shiftKey?g!==j[0]&&g!==h[0]||!e.shiftKey?-1===b.indexOf(i,g)&&(j.focus(),d(e)):(k.focus(),d(e)):(j.focus(),d(e))}},b.assign(c.prototype,{activate:function(){return this._recordFocus(),c.__addZone(this),this},deactivate:function(){return c.__removeZone(this),this._restoreFocus(),this},_recordFocus:function(){this.$focus=a(":focus")},_restoreFocus:function(){this.$focus&&this.$focus.length&&this.$focus.focus()}}),c.__reset(),c}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("spinjs",b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=k.substring(0,k.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(n.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",n.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a,b){return"string"==typeof a?a:a[b%a.length]}function i(a){return"undefined"==typeof this?new i(a):void(this.opts=f(a||{},i.defaults,o))}function j(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}n.addRule(".spin-vml","behavior:url(#default#VML)"),i.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function g(a,g,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:h(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)g(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)g(i);return b(a,m)},i.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var k,l=["webkit","Moz","ms","O"],m={},n=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};i.defaults={},f(i.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),j=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+j)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+j)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!k){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*j+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,j=0,l=(f.lines-1)*(1-f.direction)/2;j<f.lines;j++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:k&&c(f.opacity,f.trail,l+j*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,g(h(f.color,j),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var p=e(a("group"),{behavior:"url(#default#VML)"});return!d(p,"transform")&&p.adj?j():k=d(p,"animation"),i}),define("widgets/hover",["jquery","lodash","jqueryui/widget"],function(a,b){"use strict";function c(a,b,c){return Math.abs(a[0]-b[0])>c||Math.abs(a[1]-b[1])>c}function d(a){a._hoverIsTouchTriggered=!1}var e=a(document);a.widget("ted.hover",{options:{hoverIdleDelay:4e3,hoverStartDelay:200,hoverStopDelay:400,hoverSwipeTolerance:5},hoverState:function(a){return b.isUndefined(a)||this._hoverChangeState(null,!!a),this._hoverIsOn},_hoverIsClicking:!1,_hoverIsOn:!1,_hoverIsTouchTriggered:!1,_hoverLastCoords:null,_hoverStartTimeout:null,_hoverIdleTimeout:null,_hoverStopTimeout:null,_hoverChangeStateBound:null,_hoverMoveChangeBound:null,_hoverMouseMoveThrottled:null,_hoverTouchOutBound:null,_create:function(){this._hoverInit()},_hoverEvents:function(){return{mouseenter:this._hoverMouseMoveThrottled,mousemove:this._hoverMouseMoveThrottled,mouseleave:this._hoverOut,touchstart:this._hoverTouchStart,touchend:this._hoverTouchEnd,touchmove:this._hoverTouchMove,touchcancel:this._hoverTouchCancel,mousedown:this._hoverMouseDown,mouseup:this._hoverMouseUp,click:this._hoverMouseClick}},_hoverMove:function(a){this._hoverIsOn?this._hoverMoveChange(a):this._hoverStartSetTimeout(a)},_hoverMoveChange:function(a){var b={x:a.pageX||null,y:a.pageY||null};"mousedown"!==a.type&&"touchstart"!==a.type&&this._hoverLastCoords&&b.x&&b.x===this._hoverLastCoords.x&&b.y===this._hoverLastCoords.y||(this._hoverLastCoords=b,this._hoverChangeState(a,!0),this._hoverIdleSetTimeout(a))},_hoverOut:function(a){this._hoverStartClearTimeout(),this._hoverStopSetTimeout(a)},_hoverMouseClick:function(a){this._hoverIsTouchTriggered||this._hoverIsOn&&this._trigger("tap",a)},_hoverMouseDown:function(){this._hoverIsTouchTriggered||(this._hoverIsClicking=!0,this._hoverIdleClearTimeout())},_hoverMouseMove:function(a){this._hoverIsTouchTriggered||this._hoverMove(a)},_hoverMouseUp:function(a){this._hoverIsTouchTriggered||(this._hoverIsClicking=!1,this._hoverIdleSetTimeout(a))},_hoverTouchStart:function(){this._hoverIsTouchTriggered=!0,this._hoverTouchStartCoords=null,this._hoverTouchEndCoords=null},_hoverTouchEnd:function(a){this._hoverTouchSafetyTimeout&&window.clearTimeout(this._hoverTouchSafetyTimeout),this._hoverTouchSafetyTimeout=b.delay(d,600,this),this._hoverTouchEndCoords&&c(this._hoverTouchStartCoords,this._hoverTouchEndCoords,this.options.hoverSwipeTolerance)||(this._hoverIsOn&&this._trigger("tap",a),this._hoverMoveChange(a))},_hoverTouchCancel:function(a){a.preventDefault()},_hoverTouchMove:function(a){var b=a.originalEvent.touches[0],c=[b.pageX,b.pageY];null===this._hoverTouchStartCoords?this._hoverTouchStartCoords=c:this._hoverTouchEndCoords=c,this._hoverIsOn&&this._hoverMove(a)},_hoverTouchOut:function(b){a(b.target).closest(this.element).length||this._hoverChangeState(b,!1)},_hoverChangeState:function(a,b){b=!!b,this._hoverIdleClearTimeout(),this._hoverStartClearTimeout(),this._hoverStopClearTimeout(),!b&&this._hoverIsClicking||b!==this._hoverIsOn&&(this._hoverIsOn=b,this[b?"_hoverStart":"_hoverStop"](a),b?this._on(e,{touchstart:this._hoverTouchOutBound}):this._off(e,"touchstart"))},_hoverStartSetTimeout:function(a){this._hoverStartTimeout||(this._hoverStartTimeout=b.delay(this._hoverMoveChangeBound,this.options.hoverStartDelay,a))},_hoverStartClearTimeout:function(){this._hoverStartTimeout&&(window.clearTimeout(this._hoverStartTimeout),this._hoverStartTimeout=null)},_hoverStopSetTimeout:function(a){this._hoverStopClearTimeout(),this._hoverStopTimeout=b.delay(this._hoverChangeStateBound,this.options.hoverStopDelay,a,!1)},_hoverStopClearTimeout:function(){this._hoverStopTimeout&&(window.clearTimeout(this._hoverStopTimeout),this._hoverStopTimeout=null)},_hoverIdleSetTimeout:function(a){this._hoverIdleClearTimeout(),!this._hoverIsClicking&&this.options.hoverIdleDelay&&(this._hoverIdleTimeout=b.delay(this._hoverChangeStateBound,this.options.hoverIdleDelay,a,!1))},_hoverIdleClearTimeout:function(){this._hoverIdleTimeout&&(window.clearTimeout(this._hoverIdleTimeout),this._hoverIdleTimeout=null)},_hoverInit:function(){this._hoverChangeStateBound=b.bind(this._hoverChangeState,this),this._hoverMoveChangeBound=b.bind(this._hoverMoveChange,this),this._hoverTouchOutBound=b.bind(this._hoverTouchOut,this),this._hoverMouseMoveThrottled=b.throttle(b.bind(this._hoverMouseMove,this),100,{leading:!0,trailing:!1}),this._on(this._hoverEvents())},_hoverDestroy:function(){this._off(this._hoverEvents())},_hoverStart:function(a){this._trigger("start",a)},_hoverStop:function(a){this._trigger("stop",a)}})}),define("widgets/player",["jquery","lodash","widgets/player/ga-tracker","widgets/player/ted-tracker","widgets/player/cs-tracker","utils/f","utils/is_mobile","utils/query_param","utils/ted","player/Player","lib/pubSub","lib/focus-zone","Cookies","spinjs","jqueryui/widget","widgets/hover","lib/resize"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(){return h("playerMode")||null}function p(a){a.preventDefault(),a.stopPropagation()}var q="player",r=q+"--playing",s=q+"--fullscreen",t=q+"--show-cursor",u=q+"__container",v=u+"__cursor-killer",w=u+"__focus",x=u+"__placeholder",y=u+"__video",z=a("<div></div>"),A=b.once(function(c,d){window.onYouTubeIframeAPIReady=b.bind(c,d),a.getScript("//www.youtube.com/iframe_api")});return a.widget("ted.player",a.ted.hover,{options:{breakpoint:!0,currentTalk:null,flashVars:{},metricsKey:null,mode:o(),nativeLanguage:"en",startTrackingAt:0,swf:i("playerPath"),talks:null,hideCursorDelay:1e3,soonThreshold:.1,recordInIdentity:!0},_isPlayerInitialized:!1,_isPlaying:!1,_addElements:function(){var a=this.element.find("div."+u);a.length||(a=z.clone().addClass(u).appendTo(this.element));var b=a.find("div."+x);b.length||(b=z.clone().addClass(x).appendTo(a)),b.wrap(z.clone().addClass(w));var c=b.closest("div."+w).addClass(y).attr({href:"#",role:"button",title:"Play/Pause"}),d=a.find("div."+v);d.length||(d=z.clone().addClass(v).appendTo(a)),this.elements={container:a,focal:c,placeholder:b,cursorKiller:d}},_breakpoint:function(a){this.options.breakpoint&&(1024>a?this.video.attr("controls","controls"):this.video.removeAttr("controls"))},_create:function(){this.options.currentTalk||(this.options.currentTalk=this.options.talks[0]),this._on({playerplay:function(){this._isPlaying=!0,this.element.addClass(r)},playerpause:function(){this._isPlaying=!1,this.element.removeClass(r)}}),this._isInternal=!this.talk().external,this.options.hoverStopDelay=this.options.hideCursorDelay,new c(this),new d(this),new e(this),this._initializePlayer()},_initializePlayer:function(){this._isPlayerInitialized||(this._isPlayerInitialized=!0,this.element.addClass(q),this._addElements(),this._isInternal?this._initializeInternalPlayer():"YouTube"===this.talk().external.service&&this._initializeYouTubePlayer(),this._hoverInit())},_initializeYouTubePlayer:function(){A(this._youTubeApiReady,this),this._on({playerrequestplay:function(){this._ytPlayer&&this._ytPlayer.playVideo&&this._ytPlayer.playVideo()}})},_youTubeApiReady:function(){var b=this,c=this.talk(),d="//www.youtube.com/embed/"+c.external.code+"?showinfo=0&enablejsapi=1&autoplay=0&origin="+location.origin;c.external.startTime&&(d+="&start="+c.external.startTime);var e=a("<iframe class="+y+" src="+d+" frameborder=0 allowfullscreen></iframe>");b.elements.placeholder.replaceWith(e),b._ytPlayer=new YT.Player(e.get(0),{events:{}}),b._trigger("domready")},_initializeInternalPlayer:function(){var c=h("dfptest");this.options.talks=this.options.talks.map(function(a){if(c){var b=encodeURIComponent(c);a.resources.hls.adUrl=a.resources.hls.adUrl.replace(/(cust_params=[^&]+)&/,"$1%26dfptest%3D"+b+"&")}var d=Number(a.introDuration);return a.introDuration=Math.min(d,11.82),a.adDuration=0===d?0:3.33,a.postAdDuration=0===d?0:.83,a}),this.player=new j({attrs:{"class":y},el:this.elements.placeholder.get(0),flashVars:this.options.flashVars,metricsKey:this.options.metricsKey,mode:this.options.mode,nativeLanguage:this.options.nativeLanguage,swf:this.options.swf,talks:this.options.talks}),this.element.addClass(q+"--"+this.mode()),g()&&this.element.addClass(q+"--is-mobile"),this._subscribeToPlayerEvents(),this._subscribeToKeyboardEvents(),this.player.one("ready.dom",b.bind(this._playerDomReady,this)),this.player.canFullScreen&&(this.player.on("enterFullScreen",b.bind(this._playerEnterFullScreen,this)),this.player.on("exitFullScreen",b.bind(this._playerExitFullScreen,this))),this.player.on("talk",b.bind(function(a){this.options.currentTalk=a,this._trigger("talk",null,a)},this)),this.player.on("bufferUnplayable",b.bind(this._bufferingStarted,this)),this.player.on("bufferPlayable",b.bind(this._bufferingStopped,this)),this._on({playercurrenttime:function(a,b){this._currentTime=b.currentTime},playerplaybackrate:function(a,b){this._playbackRate=b.playbackRate},playervolume:function(a,b){this._volume=b.volume},playerprogress:function(){var a;return function(b,c){!a&&c.progress>1-this.options.soonThreshold&&this.player.isLastTalk()&&(a=!0,this._trigger("soon"))}}(),playerpostrollcomplete:function(){this.player.isLastTalk()&&!this._queuedTalkId&&(this._queuedTalkId=this.options.currentTalk.id)},playerrequestplay:function(){var c=a("*:focus");c.closest(this.elements.focal).length||(this._oldFocus=c),this.elements.focal.attr("tabindex","1"),this._queuedTalkId?(a(this.player.el).attr("preload",""),this.player.playTalk(this._queuedTalkId),this._queuedTalkId=null,b.delay(f(this.player,"play"))):this.player.play()},playerplay:function(){this.elements.focal.focus()},playerrequestpause:function(){this.player.postrolling||this.player.pause()}})},_destroy:function(){this.options.breakpoint&&k("breakpoint").unsubscribe(this._breakpoint)},_playerDomReady:function(){var c=a(this.player.el);this.video=c,this.options.breakpoint&&k("breakpoint").subscribe(b.bind(this._breakpoint,this)),this._trigger("domready")},_playerEnterFullScreen:function(){this.element.addClass(s),this._fullscreenZone("activate")},_playerExitFullScreen:function(){this.element.removeClass(s),this._fullscreenZone("deactivate")},_subscribeToKeyboardEvents:function(){this._on(this.elements.focal,{keydown:this._keyDown,keyup:this._keyUp})},_subscribeToPlayerEvents:function(){var a,c=this;this._on({playerrequestplay:function(){a=!0},playerplay:function(){a=!1}}),b.forEach(["ad","currentTime","duration","ended","enterFullScreen","error","exitFullScreen","pause","play","progress","ready","seeked","seeking","volume","muted","idle","complete","talkComplete","prerollStart","prerollBlock","postrollStart","postrollComplete","postrollDuration","postrollRemaining","adBlock","bufferPlayable","bufferUnplayable","subtitle","playbackRate","metricsData","metricsToggle"],function(b){c.player.on(b,function(d){var e={};"play"!==b||a||c._trigger("requestplay"),e[b]=d,c._trigger(b,null,e),c["_"+b]=d})})},_hoverStart:function(a){this.element.addClass(t),this._trigger("hoverstart",a)},_hoverStop:function(a){this.element.removeClass(t),this._trigger("hoverstop",a)},_bufferingStarted:function(){this._spinner||(this._spinner=new n({lines:13,length:13,width:5,radius:16,color:"#FFF",trail:50,shadow:!0})),this._spinner.spin(this.element.get(0))},_bufferingStopped:function(){this._spinner.stop()},_keyDown:function(b){var c=a.ui.keyCode,d=b.ctrlKey||b.shiftKey||b.altKey,e=this,f=e.options.currentTalk&&e.options.currentTalk.duration||0,g=e._currentTime||0,h=e.volume()||0;switch(b.keyCode){case c.ENTER:case c.NUMPAD_ENTER:case c.SPACE:e.toggle(),p(b);break;case c.DOWN:d?e.mute(!0):e.volume(h-.1),p(b);break;case c.UP:d?e.mute(!1):e.volume(h+.1),p(b);break;case c.LEFT:d?e.seek(g-.1*f):e.seek(g-15),p(b);break;case c.RIGHT:d?e.seek(g+.1*f):e.seek(g+15),p(b);break;case c.HOME:e.seek(0),p(b);break;case c.END:e.seek(f-1),p(b);break;case c.TAB:var i=this._oldFocus;this._tabDown||!i||i.is(":hidden")||i.is(":disabled")||(i.focus(),p(b)),this._oldFocus=null,this._tabDown=!0}},_keyUp:function(b){b.keyCode===a.ui.keyCode.TAB&&(this._tabDown=!1)},_fullscreenZone:function(a){var b=this.player.fullScreenElement,c=this._fullscreenZoneObj;b&&(c||(c=new l(b),this._fullscreenZoneObj=c),c[a]())},mode:function(){return this._isInternal?this.player.options.mode:"external"},talk:function(a){return arguments.length&&(this.queue(a),this._trigger("requestplay")),this.options.currentTalk},talks:function(){return this.player.talks},toggle:function(){this[this._isPlaying?"pause":"play"]()},play:function(){this._trigger("requestplay")},playNext:function(){this._trigger("requestnext"),this.player.playNext()},playPrev:function(){this._trigger("requestprev"),this.player.playPrev()},pause:function(){this._trigger("requestpause")},_playbackRate:null,playbackRate:function(a){return arguments.length&&(this.player.playbackRate(a),this._playbackRate=a),this._playbackRate},queue:function(a){this._queuedTalkId=a},sendAds:function(a){this.player.sendAds(a)},seek:function(a,b){this.options.startTrackingAt=b?a:0,this.player.seek(a)},_subtitle:null,subtitle:function(a){if(arguments.length){var c=a?b.find(this.talk().languages,{languageCode:a}):!1;this.player.subtitle(a),this._subtitle=c}return this._subtitle},_volume:null,volume:function(a){return arguments.length&&this.player.volume(a),this._volume},_muted:null,mute:function(a){return arguments.length&&this.player.mute(a),this._muted},toggleFullScreen:function(){var b=a("html,body"),c=a(document).scrollTop(),d=a(this.element),e=d.offset().top;c>e&&b.scrollTop(e),this[this.player.isFullScreen?"cancelFullScreen":"requestFullScreen"](this.elements.container.get(0))},requestFullScreen:function(a){this.player.requestFullScreen(a)},cancelFullScreen:function(a){this.player.cancelFullScreen(a)},isControllable:function(){return this._isInternal},isFullScreen:function(){return this._isInternal?this.player.isFullScreen:!1},canFullScreen:function(){return this._isInternal?this.player.canFullScreen:!1},canPlaybackRate:function(){return this._isInternal?this.player.canPlaybackRate:!1},canSubtitle:function(){var a=String(this.player.mode);return this._isInternal&&"flash"===a},capQualityToStage:function(a){this.player.capQualityToStage(a)}}),function(b,c){return a(b).player(c)}}),define("apps/embeddable/views/player",["jquery","lodash","./base","utils/is_mobile","hbs!apps/embeddable/templates/player","widgets/player"],function(a,b,c,d,e){"use strict";var f=c.extend({play:function(){this.state.set("activated",!0),this.$player.player("play")},pause:function(){this.$player.player("pause")},talk:function(a){this.$player.player("talk",a.get("id"))},mute:function(){this.$player.player("mute",!0)},unmute:function(){this.$player.player("mute",!1)},volume:function(a){this.$player.player("volume",a)},subtitle:function(a){this.$player.player("subtitle",a)},fullscreen:function(){this.$player.player("requestFullScreen",this.fullscreenElement||this.el)},smallscreen:function(){this.$player.player("cancelFullScreen",this.fullscreenElement||this.el)},seek:function(a){this.$player.player("seek",a)},fullscreenElement:null,className:"Embeddable__player",events:{playererror:function(a,b){var c=b.error,d="client"===c.type?"client":null;"abortive"===c.severity&&this.state.set("error",d||"init"),"fatal"===c.severity&&this.state.set("error",d||"fatal")},playerready:function(){this.state.set("ready",!0),this._checkCapabilities()},playerplay:function(){this.state.set("playing",!0),this.state.set("paused",!1),this.state.set("ended",!1)},playerpause:function(){this.state.set("paused",!0),this.state.set("playing",!1)},playerduration:function(a,b){var c=this.$player.player("talk").id,d=this.talks.get(c);d.set("duration",b.duration),this.state.set("duration",b.duration)},playercurrenttime:function(a,b){this.state.set("currentTime",b.currentTime)},playertalk:function(a,b){this.state.set("postrolling",!1),this.state.set("talk",this.talks.get(b.id))},playerended:function(){this.state.set("paused",!1),this.state.set("playing",!1),this.state.set("ended",!0)},playervolume:function(a,b){this.state.set("volume",b.volume)},playermuted:function(a,b){this.state.set("muted",b.muted)},playersubtitle:function(a,b){this.state.set("subtitle",b&&b.subtitle&&b.subtitle.languageCode)},playerenterfullscreen:function(){this.state.set("fullscreen",!0)},playerexitfullscreen:function(){this.state.set("fullscreen",!1)},playerpostrollstart:function(){this.state.set("postrolling",!0)},playerpostrollcomplete:function(){this.state.set("postrolling",!1)}},propsDefaults:{defaultSubtitleLanguage:"en"},stateDefaults:{nativeControls:!1,activated:!1,ended:!1,error:!1,ready:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1,postrolling:!1},stateEvents:{"change:nativeControls":function(a,b){b?this.find("video").attr("controls","controls"):this.find("video").removeAttr("controls")},"on:activated":function(){this.$el.addClass("Embeddable__player--activated")}},initialize:function(a){this.talks=a.talks,this.fullscreenElement=a.fullscreenElement||null,this.initializeState(),this.initializeProps()},render:function(){return this.$el.html(e()),this.$player=this.$el.find("div.Embeddable__player__object"),this.$player.player({breakpoint:!1,nativeLanguage:this.props.get("defaultSubtitleLanguage"),talks:this.talks.toPlayer(),recordInIdentity:!1}),this},_canFullscreen:function(){return this.$player.player("canFullScreen")?!d():!1},_checkCapabilities:function(){var a=this._canFullscreen(),b=this.$player.player("canSubtitle"),c=this.$player.player("mode");this.state.set("canFullscreen",a),this.state.set("canVolume","flash"===c),this.state.set("canSubtitle",b),"flash"===c||a||this.state.set("nativeControls",!0)}});return f}),define("apps/embeddable/views/canonball",["./base"],function(a){"use strict";var b=a.extend({className:"Embeddable__canonball ted-logo",tagName:"a",attributes:{href:"#",target:"_blank"},propsDefaults:{enabled:!1,visible:!1,url:"https://www.ted.com/"},propsEvents:{"change:url":"render","change:enabled":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__canonball--enabled")},"change:visible":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__canonball--visible")}},render:function(){var a=this.props.get("url")||this.propsDefaults.url;this.$el.attr("href",a)}});return b}),define("hbs!apps/embeddable/templates/ended",["hbs","hbs/handlebars"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="hpad2 inverse text-center">\n      <div class="m2">\n        Enjoy watching TED talks?<br>\n        <a href="https://www.ted.com/newsletter?utm_source=embedPlayer&utm_medium=referral&utm_campaign=embed_newsletter" target="_blank">Get new talks in your inbox</a>\n      </div>\n\n      <a hre="#" class="Embeddable__ended__rewatch button button--highlight" role="button">Rewatch</a>\n    </div>\n  </div>\n</div>\n'},useData:!0});return b.registerPartial("apps/embeddable/templates/ended",c),c}),define("apps/embeddable/views/ended",["./base","hbs!apps/embeddable/templates/ended"],function(a,b){"use strict";var c=a.extend({className:"Embeddable__ended",events:{"click a.Embeddable__ended__rewatch":function(){this.state.set("rewatchPending",!0)}},propsDefaults:{activated:!1},propsEvents:{"change:activated":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__ended--activated"),this.state.set("rewatchPending",!1)}},stateDefaults:{rewatchPending:!1},stateEvents:{"change:rewatchPending":function(a,b){this.$el[b?"addClass":"removeClass"]("Embeddable__ended--rewatching")}},render:function(){this.$el.html(b())}});return c}),define("apps/embeddable/app",["jquery","lodash","lib/ads","hbs!apps/embeddable/templates/error","apps/embeddable/collections/talks","apps/embeddable/views/chrome","apps/embeddable/views/player","apps/embeddable/views/canonball","apps/embeddable/views/ended","widgets/hover"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){function c(){n.props.set("enabled",m.props.get("activated")&&!m.props.get("postrolling")&&!m.props.get("hideBranding")),n.props.set("visible",m.props.get("hovering")&&!m.props.get("fullscreen"))}var j=a(b.el),k=new e(b.talks),l=new g({fullscreenElement:b.el,talks:k}),m=new f({talks:k}),n=new h,o=new i;m.props.set("hideBranding",b.hideBranding),l.props.set("defaultSubtitleLanguage",b.subtitleLang),n.props.set("url",b.canonicalUrl),l.state.on("change:error",function(a,c){j.html(d({isClient:"client"===c,isInit:"init"===c,isFatal:"fatal"===c,url:b.canonicalUrl}))}),l.state.on("change:nativeControls",function(a,b){m.props.set("enabled",!b)}),l.state.on("change:activated",function(a,b){j.addClass("Embeddable--activated"),j.removeClass("Embeddable--activating"),m.props.set("activated",b)}),l.state.on("change:playing",function(a,b){m.props.set("playing",b)}),l.state.on("change:paused",function(a,b){m.props.set("paused",b)}),l.state.on("change:duration",function(a,b){m.props.set("duration",b)}),l.state.on("change:currentTime",function(a,b){m.props.set("currentTime",b)}),l.state.on("change:ended",function(a,b){o.props.set("activated",b)}),l.state.on("change:talk",function(a,b){m.props.set("talk",b),m.props.set("next",k.after(b)||null),m.props.set("prev",k.before(b)||null)}),l.state.on("change:volume",function(a,b){m.props.set("volume",b)}),l.state.on("change:canVolume",function(a,b){m.props.set("canVolume",b)}),l.state.on("change:muted",function(a,b){m.props.set("muted",b)}),l.state.on("change:subtitle",function(a,b){m.props.set("subtitle",b)}),l.state.on("change:canSubtitle",function(a,b){m.props.set("canSubtitle",b)}),l.state.on("change:fullscreen",function(a,b){m.props.set("fullscreen",b)}),l.state.on("change:canFullscreen",function(a,b){m.props.set("canFullscreen",b)}),l.state.on("change:postrolling",function(a,b){m.props.set("postrolling",b)}),m.state.on("change:playPending",function(a,b){b&&l.play()}),m.state.on("change:pausePending",function(a,b){b&&l.pause()}),m.state.on("change:pendingTalk",function(a,b){b&&l.talk(b)}),m.state.on("change:mutePending",function(a,b){b&&l.mute()}),m.state.on("change:unmutePending",function(a,b){b&&l.unmute()}),m.state.on("change:pendingVolume",function(a,b){null!=b&&l.volume(b)}),m.state.on("change:pendingSubtitle",function(a,b){null!==b&&(b?l.subtitle(b):l.subtitle(!1))}),m.state.on("change:fullscreenPending",function(a,b){b&&l.fullscreen()}),m.state.on("change:smallscreenPending",function(a,b){b&&l.smallscreen()}),m.state.on("change:pendingSeek",function(a,b){null!=b&&l.seek(b)}),o.state.on("change:rewatchPending",function(a,b){b&&(l.seek(0),l.play())}),m.props.on("change:activated",c),m.props.on("change:hovering",c),m.props.on("change:postrolling",c),m.props.on("change:fullscreen",c),j.hover().on("hoverstart",function(){m.props.set("hovering",!0)}).on("hoverstop",function(){m.props.set("hovering",!1)}),this.$el=j,this.talks=k,this.player=l,this.chrome=m,this.canonball=n,this.ended=o}return b.extend(j.prototype,{activate:function(){this.$el.addClass("Embeddable--activating"),this.player.play()},render:function(){this.$el.prepend(this.player.$el),this.$el.append(this.canonball.$el),this.$el.append(this.chrome.$el),this.$el.append(this.ended.$el),this.ended.render(),this.chrome.render(),this.player.render(),c.initPlayer(this.player.$player)}}),j.init=function(a){var c=new j({el:a.el,canonicalUrl:a.canonicalUrl,hideBranding:!!a.hideBranding,subtitleLang:a.subtitleLang,talks:a.talks});c.$el.data("embeddable",c),c.render(),c.player.state.once("change:ready",function(){window[a.activate]=b.once(function(){c.activate()}),c.$el.hasClass("Embeddable--activating")&&window[a.activate]()})},j}),define("embed",["dq","apps/embeddable/app","lib/ads"],function(a,b,c){"use strict";a({q:window._q,modules:{embeddable:b}}),a({q:window._g,modules:{ads:c}})})}();